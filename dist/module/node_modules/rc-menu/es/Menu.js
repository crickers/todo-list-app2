import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.splice.js";import"/node_modules/core-js/modules/es.object.assign.js";import"/node_modules/core-js/modules/es.regexp.to-string.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _assertThisInitialized from"/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import{Provider,create}from"/node_modules/mini-store.js";import omit from"/node_modules/rc-util/es/omit.js";import SubPopupMenu,{getActiveKey}from"/node_modules/rc-menu/es/SubPopupMenu.js";import{noop}from"/node_modules/rc-menu/es/util.js";import{getMotion}from"/node_modules/rc-menu/es/utils/legacyUtil.js";var Menu=function(_React$Component){function Menu(props){var _this;_classCallCheck(this,Menu),_this=_super.call(this,props),_this.onSelect=function(selectInfo){var _assertThisInitialize=_assertThisInitialized(_this),props=_assertThisInitialize.props;if(props.selectable){var _this$store$getState=_this.store.getState(),_selectedKeys=_this$store$getState.selectedKeys,selectedKey=selectInfo.key;_selectedKeys=props.multiple?_selectedKeys.concat([selectedKey]):[selectedKey],"selectedKeys"in props||_this.store.setState({selectedKeys:_selectedKeys}),props.onSelect(_objectSpread(_objectSpread({},selectInfo),{},{selectedKeys:_selectedKeys}))}},_this.onClick=function(e){var mode=_this.getRealMenuMode(),_assertThisInitialize2=_assertThisInitialized(_this),store=_assertThisInitialize2.store,onOpenChange=_assertThisInitialize2.props.onOpenChange;"inline"===mode||"openKeys"in _this.props||(store.setState({openKeys:[]}),onOpenChange([])),_this.props.onClick(e)},_this.onKeyDown=function(e,callback){_this.innerMenu.getWrappedInstance().onKeyDown(e,callback)},_this.onOpenChange=function(event){var _assertThisInitialize3=_assertThisInitialized(_this),props=_assertThisInitialize3.props,openKeys=_this.store.getState().openKeys.concat(),changed=!1,processSingle=function processSingle(e){var oneChanged=!1;if(e.open)oneChanged=-1===openKeys.indexOf(e.key),oneChanged&&openKeys.push(e.key);else{var index=openKeys.indexOf(e.key);oneChanged=-1!==index,oneChanged&&openKeys.splice(index,1)}changed=changed||oneChanged};Array.isArray(event)?event.forEach(processSingle):processSingle(event),changed&&(!("openKeys"in _this.props)&&_this.store.setState({openKeys:openKeys}),props.onOpenChange(openKeys))},_this.onDeselect=function(selectInfo){var _assertThisInitialize4=_assertThisInitialized(_this),props=_assertThisInitialize4.props;if(props.selectable){var _selectedKeys2=_this.store.getState().selectedKeys.concat(),selectedKey=selectInfo.key,index=_selectedKeys2.indexOf(selectedKey);-1!==index&&_selectedKeys2.splice(index,1),"selectedKeys"in props||_this.store.setState({selectedKeys:_selectedKeys2}),props.onDeselect(_objectSpread(_objectSpread({},selectInfo),{},{selectedKeys:_selectedKeys2}))}},_this.onMouseEnter=function(e){_this.restoreModeVerticalFromInline();var onMouseEnter=_this.props.onMouseEnter;onMouseEnter&&onMouseEnter(e)},_this.onTransitionEnd=function(e){var widthCollapsed="width"===e.propertyName&&e.target===e.currentTarget,className=e.target.className,classNameValue="[object SVGAnimatedString]"===Object.prototype.toString.call(className)?className.animVal:className,iconScaled="font-size"===e.propertyName&&0<=classNameValue.indexOf("anticon");(widthCollapsed||iconScaled)&&_this.restoreModeVerticalFromInline()},_this.setInnerMenu=function(node){_this.innerMenu=node},_this.isRootMenu=!0;var selectedKeys=props.defaultSelectedKeys,openKeys=props.defaultOpenKeys;return"selectedKeys"in props&&(selectedKeys=props.selectedKeys||[]),"openKeys"in props&&(openKeys=props.openKeys||[]),_this.store=create({selectedKeys:selectedKeys,openKeys:openKeys,activeKey:{"0-menu-":getActiveKey(props,props.activeKey)}}),_this.state={switchingModeFromInline:!1,prevProps:props,inlineOpenKeys:[],store:_this.store},_this}_inherits(Menu,_React$Component);var _super=_createSuper(Menu);return _createClass(Menu,[{key:"componentDidMount",value:function componentDidMount(){this.updateMiniStore(),this.updateMenuDisplay()}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps){var _this$props=this.props,siderCollapsed=_this$props.siderCollapsed,inlineCollapsed=_this$props.inlineCollapsed,onOpenChange=_this$props.onOpenChange;(!prevProps.inlineCollapsed&&inlineCollapsed||!prevProps.siderCollapsed&&siderCollapsed)&&onOpenChange([]),this.updateMiniStore(),this.updateMenuDisplay()}},{key:"updateMenuDisplay",value:function updateMenuDisplay(){var collapsedWidth=this.props.collapsedWidth,store=this.store,prevOpenKeys=this.prevOpenKeys,hideMenu=this.getInlineCollapsed()&&(0===collapsedWidth||"0"===collapsedWidth||"0px"===collapsedWidth);hideMenu?(this.prevOpenKeys=store.getState().openKeys.concat(),this.store.setState({openKeys:[]})):prevOpenKeys&&(this.store.setState({openKeys:prevOpenKeys}),this.prevOpenKeys=null)}},{key:"getRealMenuMode",value:function getRealMenuMode(){var mode=this.props.mode,switchingModeFromInline=this.state.switchingModeFromInline,inlineCollapsed=this.getInlineCollapsed();return switchingModeFromInline&&inlineCollapsed?"inline":inlineCollapsed?"vertical":mode}},{key:"getInlineCollapsed",value:function getInlineCollapsed(){var _this$props2=this.props,inlineCollapsed=_this$props2.inlineCollapsed,siderCollapsed=_this$props2.siderCollapsed;return void 0===siderCollapsed?inlineCollapsed:siderCollapsed}},{key:"restoreModeVerticalFromInline",value:function restoreModeVerticalFromInline(){var switchingModeFromInline=this.state.switchingModeFromInline;switchingModeFromInline&&this.setState({switchingModeFromInline:!1})}},{key:"updateMiniStore",value:function updateMiniStore(){"selectedKeys"in this.props&&this.store.setState({selectedKeys:this.props.selectedKeys||[]}),"openKeys"in this.props&&this.store.setState({openKeys:this.props.openKeys||[]})}},{key:"render",value:function render(){var props=_objectSpread({},omit(this.props,["collapsedWidth","siderCollapsed","defaultMotions"])),mode=this.getRealMenuMode();return props.className+=" ".concat(props.prefixCls,"-root"),"rtl"===props.direction&&(props.className+=" ".concat(props.prefixCls,"-rtl")),props=_objectSpread(_objectSpread({},props),{},{mode:mode,onClick:this.onClick,onOpenChange:this.onOpenChange,onDeselect:this.onDeselect,onSelect:this.onSelect,onMouseEnter:this.onMouseEnter,onTransitionEnd:this.onTransitionEnd,parentMenu:this,motion:getMotion(this.props,this.state,mode)}),delete props.openAnimation,delete props.openTransitionName,React.createElement(Provider,{store:this.store},React.createElement(SubPopupMenu,Object.assign({},props,{ref:this.setInnerMenu}),this.props.children))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,prevState){var prevProps=prevState.prevProps,store=prevState.store,prevStoreState=store.getState(),newStoreState={},newState={prevProps:nextProps};return"inline"===prevProps.mode&&"inline"!==nextProps.mode&&(newState.switchingModeFromInline=!0),"openKeys"in nextProps?newStoreState.openKeys=nextProps.openKeys||[]:((nextProps.inlineCollapsed&&!prevProps.inlineCollapsed||nextProps.siderCollapsed&&!prevProps.siderCollapsed)&&(newState.switchingModeFromInline=!0,newState.inlineOpenKeys=prevStoreState.openKeys,newStoreState.openKeys=[]),(!nextProps.inlineCollapsed&&prevProps.inlineCollapsed||!nextProps.siderCollapsed&&prevProps.siderCollapsed)&&(newStoreState.openKeys=prevState.inlineOpenKeys,newState.inlineOpenKeys=[])),Object.keys(newStoreState).length&&store.setState(newStoreState),newState}}]),Menu}(React.Component);Menu.defaultProps={selectable:!0,onClick:noop,onSelect:noop,onOpenChange:noop,onDeselect:noop,defaultSelectedKeys:[],defaultOpenKeys:[],subMenuOpenDelay:.1,subMenuCloseDelay:.1,triggerSubMenuAction:"hover",prefixCls:"rc-menu",className:"",mode:"vertical",style:{},builtinPlacements:{},overflowedIndicator:React.createElement("span",null,"\xB7\xB7\xB7")};export default Menu;