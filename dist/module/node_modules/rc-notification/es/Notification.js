import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.iterator.js";import"/node_modules/core-js/modules/es.array.splice.js";import"/node_modules/core-js/modules/es.object.assign.js";import"/node_modules/core-js/modules/esnext.map.delete-all.js";import"/node_modules/core-js/modules/esnext.map.every.js";import"/node_modules/core-js/modules/esnext.map.filter.js";import"/node_modules/core-js/modules/esnext.map.find.js";import"/node_modules/core-js/modules/esnext.map.find-key.js";import"/node_modules/core-js/modules/esnext.map.includes.js";import"/node_modules/core-js/modules/esnext.map.key-of.js";import"/node_modules/core-js/modules/esnext.map.map-keys.js";import"/node_modules/core-js/modules/esnext.map.map-values.js";import"/node_modules/core-js/modules/esnext.map.merge.js";import"/node_modules/core-js/modules/esnext.map.reduce.js";import"/node_modules/core-js/modules/esnext.map.some.js";import"/node_modules/core-js/modules/esnext.map.update.js";import"/node_modules/core-js/modules/web.dom-collections.iterator.js";import _objectWithoutProperties from"/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import{Component}from"c:\\node_modules\\react\\index.js";import ReactDOM from"c:\\node_modules\\react-dom\\index.js";import classNames from"/node_modules/classnames.js";import{CSSMotionList}from"/node_modules/rc-motion.js";import Notice from"/node_modules/rc-notification/es/Notice.js";import _useNotification from"/node_modules/rc-notification/es/useNotification.js";var seed=0,now=Date.now();function getUuid(){var id=seed;return seed+=1,"rcNotification_".concat(now,"_").concat(id)}var Notification=function(_Component){function Notification(){var _this;return _classCallCheck(this,Notification),_this=_super.apply(this,arguments),_this.state={notices:[]},_this.hookRefs=new Map,_this.add=function(originNotice,holderCallback){var key=originNotice.key||getUuid(),notice=_objectSpread(_objectSpread({},originNotice),{},{key:key}),maxCount=_this.props.maxCount;_this.setState(function(previousState){var notices=previousState.notices,noticeIndex=notices.map(function(v){return v.notice.key}).indexOf(key),updatedNotices=notices.concat();return-1===noticeIndex?(maxCount&&notices.length>=maxCount&&(notice.key=updatedNotices[0].notice.key,notice.updateMark=getUuid(),notice.userPassKey=key,updatedNotices.shift()),updatedNotices.push({notice:notice,holderCallback:holderCallback})):updatedNotices.splice(noticeIndex,1,{notice:notice,holderCallback:holderCallback}),{notices:updatedNotices}})},_this.remove=function(removeKey){_this.setState(function(_ref){var notices=_ref.notices;return{notices:notices.filter(function(_ref2){var _ref2$notice=_ref2.notice,key=_ref2$notice.key,userPassKey=_ref2$notice.userPassKey;return(userPassKey||key)!==removeKey})}})},_this.noticePropsMap={},_this}_inherits(Notification,_Component);var _super=_createSuper(Notification);return _createClass(Notification,[{key:"getTransitionName",value:function getTransitionName(){var _this$props=this.props,prefixCls=_this$props.prefixCls,animation=_this$props.animation,transitionName=this.props.transitionName;return!transitionName&&animation&&(transitionName="".concat(prefixCls,"-").concat(animation)),transitionName}},{key:"render",value:function render(){var _this2=this,notices=this.state.notices,_this$props2=this.props,prefixCls=_this$props2.prefixCls,className=_this$props2.className,closeIcon=_this$props2.closeIcon,style=_this$props2.style,noticeKeys=[];return notices.forEach(function(_ref3,index){var notice=_ref3.notice,holderCallback=_ref3.holderCallback,updateMark=index===notices.length-1?notice.updateMark:void 0,key=notice.key,userPassKey=notice.userPassKey,noticeProps=_objectSpread(_objectSpread(_objectSpread({prefixCls:prefixCls,closeIcon:closeIcon},notice),notice.props),{},{key:key,noticeKey:userPassKey||key,updateMark:updateMark,onClose:function onClose(noticeKey){var _notice$onClose;_this2.remove(noticeKey),null===(_notice$onClose=notice.onClose)||void 0===_notice$onClose?void 0:_notice$onClose.call(notice)},onClick:notice.onClick,children:notice.content});noticeKeys.push(key),_this2.noticePropsMap[key]={props:noticeProps,holderCallback:holderCallback}}),React.createElement("div",{className:classNames(prefixCls,className),style:style},React.createElement(CSSMotionList,{keys:noticeKeys,motionName:this.getTransitionName(),onVisibleChanged:function onVisibleChanged(changedVisible,_ref4){var key=_ref4.key;changedVisible||delete _this2.noticePropsMap[key]}},function(_ref5){var key=_ref5.key,motionClassName=_ref5.className,motionStyle=_ref5.style,_this2$noticePropsMap=_this2.noticePropsMap[key],noticeProps=_this2$noticePropsMap.props,holderCallback=_this2$noticePropsMap.holderCallback;return holderCallback?React.createElement("div",{key:key,className:classNames(motionClassName,"".concat(prefixCls,"-hook-holder")),style:_objectSpread({},motionStyle),ref:function ref(div){"undefined"==typeof key||(div?(_this2.hookRefs.set(key,div),holderCallback(div,noticeProps)):_this2.hookRefs.delete(key))}}):React.createElement(Notice,Object.assign({},noticeProps,{className:classNames(motionClassName,null===noticeProps||void 0===noticeProps?void 0:noticeProps.className),style:_objectSpread(_objectSpread({},motionStyle),null===noticeProps||void 0===noticeProps?void 0:noticeProps.style)}))}))}}]),Notification}(Component);Notification.defaultProps={prefixCls:"rc-notification",animation:"fade",style:{top:65,left:"50%"}},Notification.newInstance=function newNotificationInstance(properties,callback){function ref(notification){called||(called=!0,callback({notice:function notice(noticeProps){notification.add(noticeProps)},removeNotice:function removeNotice(key){notification.remove(key)},component:notification,destroy:function destroy(){ReactDOM.unmountComponentAtNode(div),div.parentNode&&div.parentNode.removeChild(div)},useNotification:function useNotification(){return _useNotification(notification)}}))}var _ref6=properties||{},getContainer=_ref6.getContainer,props=_objectWithoutProperties(_ref6,["getContainer"]),div=document.createElement("div");if(getContainer){var root=getContainer();root.appendChild(div)}else document.body.appendChild(div);var called=!1;ReactDOM.render(React.createElement(Notification,Object.assign({},props,{ref:ref})),div)};export default Notification;