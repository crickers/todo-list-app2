import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import _typeof from"/node_modules/@babel/runtime/helpers/esm/typeof.js";import _objectWithoutProperties from"/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import React from"c:\\node_modules\\react\\index.js";import{useEffect,useState}from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import toArray from"/node_modules/rc-util/es/Children/toArray.js";import isMobile from"/node_modules/rc-util/es/isMobile.js";import useMergedState from"/node_modules/rc-util/es/hooks/useMergedState.js";import TabNavList from"/node_modules/rc-tabs/es/TabNavList.js";import TabPanelList from"/node_modules/rc-tabs/es/TabPanelList.js";import TabPane from"/node_modules/rc-tabs/es/TabPanelList/TabPane.js";import TabContext from"/node_modules/rc-tabs/es/TabContext.js";var uuid=0;function parseTabList(children){return toArray(children).map(function(node){if(React.isValidElement(node)){var key=node.key===void 0?void 0:node.key+"";return _objectSpread(_objectSpread({key:key},node.props),{},{node:node})}return null}).filter(function(tab){return tab})}function Tabs(_ref,ref){var _classNames,mergedAnimated,id=_ref.id,_ref$prefixCls=_ref.prefixCls,prefixCls=void 0===_ref$prefixCls?"rc-tabs":_ref$prefixCls,className=_ref.className,children=_ref.children,direction=_ref.direction,activeKey=_ref.activeKey,defaultActiveKey=_ref.defaultActiveKey,editable=_ref.editable,_ref$animated=_ref.animated,animated=void 0===_ref$animated?{inkBar:!0,tabPane:!1}:_ref$animated,_ref$tabPosition=_ref.tabPosition,tabPosition=void 0===_ref$tabPosition?"top":_ref$tabPosition,tabBarGutter=_ref.tabBarGutter,tabBarStyle=_ref.tabBarStyle,tabBarExtraContent=_ref.tabBarExtraContent,locale=_ref.locale,moreIcon=_ref.moreIcon,moreTransitionName=_ref.moreTransitionName,destroyInactiveTabPane=_ref.destroyInactiveTabPane,renderTabBar=_ref.renderTabBar,onChange=_ref.onChange,onTabClick=_ref.onTabClick,onTabScroll=_ref.onTabScroll,restProps=_objectWithoutProperties(_ref,["id","prefixCls","className","children","direction","activeKey","defaultActiveKey","editable","animated","tabPosition","tabBarGutter","tabBarStyle","tabBarExtraContent","locale","moreIcon","moreTransitionName","destroyInactiveTabPane","renderTabBar","onChange","onTabClick","onTabScroll"]),tabs=parseTabList(children),rtl="rtl"===direction;mergedAnimated=!1===animated?{inkBar:!1,tabPane:!1}:!0===animated?{inkBar:!0,tabPane:!0}:_objectSpread({inkBar:!0,tabPane:!1},"object"===_typeof(animated)?animated:{});var _useState=useState(!1),_useState2=_slicedToArray(_useState,2),mobile=_useState2[0],setMobile=_useState2[1];useEffect(function(){setMobile(isMobile())},[]);var _useMergedState=useMergedState(function(){var _tabs$;return null===(_tabs$=tabs[0])||void 0===_tabs$?void 0:_tabs$.key},{value:activeKey,defaultValue:defaultActiveKey}),_useMergedState2=_slicedToArray(_useMergedState,2),mergedActiveKey=_useMergedState2[0],setMergedActiveKey=_useMergedState2[1],_useState3=useState(function(){return tabs.findIndex(function(tab){return tab.key===mergedActiveKey})}),_useState4=_slicedToArray(_useState3,2),activeIndex=_useState4[0],setActiveIndex=_useState4[1];useEffect(function(){var newActiveIndex=tabs.findIndex(function(tab){return tab.key===mergedActiveKey});if(-1===newActiveIndex){var _tabs$newActiveIndex;newActiveIndex=Math.max(0,Math.min(activeIndex,tabs.length-1)),setMergedActiveKey(null===(_tabs$newActiveIndex=tabs[newActiveIndex])||void 0===_tabs$newActiveIndex?void 0:_tabs$newActiveIndex.key)}setActiveIndex(newActiveIndex)},[tabs.map(function(tab){return tab.key}).join("_"),mergedActiveKey,activeIndex]);var _useMergedState3=useMergedState(null,{value:id}),_useMergedState4=_slicedToArray(_useMergedState3,2),mergedId=_useMergedState4[0],setMergedId=_useMergedState4[1],mergedTabPosition=tabPosition;mobile&&!["left","right"].includes(tabPosition)&&(mergedTabPosition="top"),useEffect(function(){id||(setMergedId("rc-tabs-".concat(uuid)),uuid+=1)},[]);var tabNavBar,sharedProps={id:mergedId,activeKey:mergedActiveKey,animated:mergedAnimated,tabPosition:mergedTabPosition,rtl:rtl,mobile:mobile},tabNavBarProps=_objectSpread(_objectSpread({},sharedProps),{},{editable:editable,locale:locale,moreIcon:moreIcon,moreTransitionName:moreTransitionName,tabBarGutter:tabBarGutter,onTabClick:function onInternalTabClick(key,e){null===onTabClick||void 0===onTabClick?void 0:onTabClick(key,e),setMergedActiveKey(key),null===onChange||void 0===onChange?void 0:onChange(key)},onTabScroll:onTabScroll,extra:tabBarExtraContent,style:tabBarStyle,panes:children});return tabNavBar=renderTabBar?renderTabBar(tabNavBarProps,TabNavList):React.createElement(TabNavList,tabNavBarProps),React.createElement(TabContext.Provider,{value:{tabs:tabs,prefixCls:prefixCls}},React.createElement("div",_extends({ref:ref,id:id,className:classNames(prefixCls,"".concat(prefixCls,"-").concat(mergedTabPosition),(_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-mobile"),mobile),_defineProperty(_classNames,"".concat(prefixCls,"-editable"),editable),_defineProperty(_classNames,"".concat(prefixCls,"-rtl"),rtl),_classNames),className)},restProps),tabNavBar,React.createElement(TabPanelList,_extends({destroyInactiveTabPane:destroyInactiveTabPane},sharedProps,{animated:mergedAnimated}))))}var ForwardTabs=React.forwardRef(Tabs);ForwardTabs.TabPane=TabPane;export default ForwardTabs;