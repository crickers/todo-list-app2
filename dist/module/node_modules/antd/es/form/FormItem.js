import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.iterator.js";import"/node_modules/core-js/modules/es.array.slice.js";import"/node_modules/core-js/modules/esnext.set.add-all.js";import"/node_modules/core-js/modules/esnext.set.delete-all.js";import"/node_modules/core-js/modules/esnext.set.difference.js";import"/node_modules/core-js/modules/esnext.set.every.js";import"/node_modules/core-js/modules/esnext.set.filter.js";import"/node_modules/core-js/modules/esnext.set.find.js";import"/node_modules/core-js/modules/esnext.set.intersection.js";import"/node_modules/core-js/modules/esnext.set.is-disjoint-from.js";import"/node_modules/core-js/modules/esnext.set.is-subset-of.js";import"/node_modules/core-js/modules/esnext.set.is-superset-of.js";import"/node_modules/core-js/modules/esnext.set.join.js";import"/node_modules/core-js/modules/esnext.set.map.js";import"/node_modules/core-js/modules/esnext.set.reduce.js";import"/node_modules/core-js/modules/esnext.set.some.js";import"/node_modules/core-js/modules/esnext.set.symmetric-difference.js";import"/node_modules/core-js/modules/esnext.set.union.js";import"/node_modules/core-js/modules/web.dom-collections.iterator.js";import _typeof from"/node_modules/@babel/runtime/helpers/esm/typeof.js";import _toConsumableArray from"/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t};import React from"c:\\node_modules\\react\\index.js";import{useContext,useRef}from"c:\\node_modules\\react\\index.js";import isEqual from"/node_modules/lodash/isEqual.js";import classNames from"/node_modules/classnames.js";import{Field}from"/node_modules/rc-field-form.js";import FieldContext from"/node_modules/rc-field-form/es/FieldContext.js";import{supportRef}from"/node_modules/rc-util/es/ref.js";import omit from"/node_modules/rc-util/es/omit.js";import Row from"/node_modules/antd/es/grid/row.js";import{ConfigContext}from"/node_modules/antd/es/config-provider.js";import{tuple}from"/node_modules/antd/es/_util/type.js";import devWarning from"/node_modules/antd/es/_util/devWarning.js";import FormItemLabel from"/node_modules/antd/es/form/FormItemLabel.js";import FormItemInput from"/node_modules/antd/es/form/FormItemInput.js";import{FormContext,FormItemContext}from"/node_modules/antd/es/form/context.js";import{toArray,getFieldId}from"/node_modules/antd/es/form/util.js";import{cloneElement,isValidElement}from"/node_modules/antd/es/_util/reactNode.js";import useFrameState from"/node_modules/antd/es/form/hooks/useFrameState.js";import useItemRef from"/node_modules/antd/es/form/hooks/useItemRef.js";var NAME_SPLIT="__SPLIT__",ValidateStatuses=tuple("success","warning","error","validating",""),MemoInput=React.memo(function(_ref){var children=_ref.children;return children},function(prev,next){return prev.value===next.value&&prev.update===next.update});function hasValidName(name){return null===name&&devWarning(!1,"Form.Item","`null` is passed as `name` property"),void 0!==name&&null!==name}function FormItem(props){function setDomErrorVisible(visible){destroyRef.current||innerSetDomErrorVisible(visible)}function renderLayout(baseChildren,fieldId,meta,isRequired){var _itemClassName,_a;if(noStyle&&!hidden)return baseChildren;var subErrorList=[];Object.keys(inlineErrors).forEach(function(subName){subErrorList=[].concat(_toConsumableArray(subErrorList),_toConsumableArray(inlineErrors[subName]||[]))});var mergedErrors;void 0!==help&&null!==help?mergedErrors=toArray(help):(mergedErrors=meta?meta.errors:[],mergedErrors=[].concat(_toConsumableArray(mergedErrors),_toConsumableArray(subErrorList)));var mergedValidateStatus="";void 0===validateStatus?(null===meta||void 0===meta?void 0:meta.validating)?mergedValidateStatus="validating":(null===(_a=null===meta||void 0===meta?void 0:meta.errors)||void 0===_a?void 0:_a.length)||subErrorList.length?mergedValidateStatus="error":(null===meta||void 0===meta?void 0:meta.touched)&&(mergedValidateStatus="success"):mergedValidateStatus=validateStatus;var itemClassName=(_itemClassName={},_defineProperty(_itemClassName,"".concat(prefixCls,"-item"),!0),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-with-help"),domErrorVisible||help),_defineProperty(_itemClassName,"".concat(className),!!className),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-has-feedback"),mergedValidateStatus&&hasFeedback),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-has-success"),"success"===mergedValidateStatus),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-has-warning"),"warning"===mergedValidateStatus),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-has-error"),"error"===mergedValidateStatus),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-is-validating"),"validating"===mergedValidateStatus),_defineProperty(_itemClassName,"".concat(prefixCls,"-item-hidden"),hidden),_itemClassName);return React.createElement(Row,_extends({className:classNames(itemClassName),style:style,key:"row"},omit(restProps,["colon","extra","getValueFromEvent","getValueProps","htmlFor","id","initialValue","isListField","labelAlign","labelCol","normalize","preserve","tooltip","validateFirst","valuePropName","wrapperCol","_internalItemRender"])),React.createElement(FormItemLabel,_extends({htmlFor:fieldId,required:isRequired,requiredMark:requiredMark},props,{prefixCls:prefixCls})),React.createElement(FormItemInput,_extends({},props,meta,{errors:mergedErrors,prefixCls:prefixCls,status:mergedValidateStatus,onDomErrorVisibleChange:setDomErrorVisible,validateStatus:mergedValidateStatus}),React.createElement(FormItemContext.Provider,{value:{updateItemErrors:updateChildItemErrors}},baseChildren)))}var name=props.name,fieldKey=props.fieldKey,noStyle=props.noStyle,dependencies=props.dependencies,customizePrefixCls=props.prefixCls,style=props.style,className=props.className,shouldUpdate=props.shouldUpdate,hasFeedback=props.hasFeedback,help=props.help,rules=props.rules,validateStatus=props.validateStatus,children=props.children,required=props.required,label=props.label,messageVariables=props.messageVariables,_props$trigger=props.trigger,trigger=void 0===_props$trigger?"onChange":_props$trigger,validateTrigger=props.validateTrigger,hidden=props.hidden,restProps=__rest(props,["name","fieldKey","noStyle","dependencies","prefixCls","style","className","shouldUpdate","hasFeedback","help","rules","validateStatus","children","required","label","messageVariables","trigger","validateTrigger","hidden"]),destroyRef=useRef(!1),_useContext=useContext(ConfigContext),getPrefixCls=_useContext.getPrefixCls,_useContext2=useContext(FormContext),formName=_useContext2.name,requiredMark=_useContext2.requiredMark,_useContext3=useContext(FormItemContext),updateItemErrors=_useContext3.updateItemErrors,_React$useState=React.useState(!!help),_React$useState2=_slicedToArray(_React$useState,2),domErrorVisible=_React$useState2[0],innerSetDomErrorVisible=_React$useState2[1],_useFrameState=useFrameState({}),_useFrameState2=_slicedToArray(_useFrameState,2),inlineErrors=_useFrameState2[0],setInlineErrors=_useFrameState2[1],_useContext4=useContext(FieldContext),contextValidateTrigger=_useContext4.validateTrigger,mergedValidateTrigger=void 0===validateTrigger?contextValidateTrigger:validateTrigger,hasName=hasValidName(name),nameRef=useRef([]);React.useEffect(function(){return function(){destroyRef.current=!0,updateItemErrors(nameRef.current.join(NAME_SPLIT),[])}},[]);var prefixCls=getPrefixCls("form",customizePrefixCls),updateChildItemErrors=noStyle?updateItemErrors:function(subName,subErrors,originSubName){setInlineErrors(function(){var prevInlineErrors=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{};return originSubName!==subName&&delete prevInlineErrors[originSubName],isEqual(prevInlineErrors[subName],subErrors)?prevInlineErrors:_extends(_extends({},prevInlineErrors),_defineProperty({},subName,subErrors))})},getItemRef=useItemRef(),isRenderProps="function"==typeof children,updateRef=useRef(0);if(updateRef.current+=1,!hasName&&!isRenderProps&&!dependencies)return renderLayout(children);var variables={};return"string"==typeof label&&(variables.label=label),messageVariables&&(variables=_extends(_extends({},variables),messageVariables)),React.createElement(Field,_extends({},props,{messageVariables:variables,trigger:trigger,validateTrigger:mergedValidateTrigger,onReset:function onReset(){setDomErrorVisible(!1)}}),function(control,meta,context){var errors=meta.errors,mergedName=toArray(name).length&&meta?meta.name:[],fieldId=getFieldId(mergedName,formName);if(noStyle){var originErrorName=nameRef.current.join(NAME_SPLIT);if(nameRef.current=_toConsumableArray(mergedName),fieldKey){var fieldKeys=Array.isArray(fieldKey)?fieldKey:[fieldKey];nameRef.current=[].concat(_toConsumableArray(mergedName.slice(0,-1)),_toConsumableArray(fieldKeys))}updateItemErrors(nameRef.current.join(NAME_SPLIT),errors,originErrorName)}var isRequired=void 0===required?!!(rules&&rules.some(function(rule){if(rule&&"object"===_typeof(rule)&&rule.required)return!0;if("function"==typeof rule){var ruleEntity=rule(context);return ruleEntity&&ruleEntity.required}return!1})):required,mergedControl=_extends({},control),childNode=null;if(devWarning(!(shouldUpdate&&dependencies),"Form.Item","`shouldUpdate` and `dependencies` shouldn't be used together. See https://ant.design/components/form/#dependencies."),Array.isArray(children)&&hasName)devWarning(!1,"Form.Item","`children` is array of render props cannot have `name`."),childNode=children;else if(isRenderProps&&(!(shouldUpdate||dependencies)||hasName))devWarning(!!(shouldUpdate||dependencies),"Form.Item","`children` of render props only work with `shouldUpdate` or `dependencies`."),devWarning(!hasName,"Form.Item","Do not use `name` with `children` of render props since it's not a field.");else if(dependencies&&!isRenderProps&&!hasName)devWarning(!1,"Form.Item","Must set `name` or use render props when `dependencies` is set.");else if(isValidElement(children)){devWarning(void 0===children.props.defaultValue,"Form.Item","`defaultValue` will not work on controlled Field. You should use `initialValues` of Form instead.");var childProps=_extends(_extends({},children.props),mergedControl);childProps.id||(childProps.id=fieldId),supportRef(children)&&(childProps.ref=getItemRef(mergedName,children));var triggers=new Set([].concat(_toConsumableArray(toArray(trigger)),_toConsumableArray(toArray(mergedValidateTrigger))));triggers.forEach(function(eventName){childProps[eventName]=function(){for(var _a2,_c2,_a,_b,_c,_len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];null===(_a=mergedControl[eventName])||void 0===_a?void 0:(_a2=_a).call.apply(_a2,[mergedControl].concat(args)),null===(_c=(_b=children.props)[eventName])||void 0===_c?void 0:(_c2=_c).call.apply(_c2,[_b].concat(args))}}),childNode=React.createElement(MemoInput,{value:mergedControl[props.valuePropName||"value"],update:updateRef.current},cloneElement(children,childProps))}else isRenderProps&&(shouldUpdate||dependencies)&&!hasName?childNode=children(context):(devWarning(!mergedName.length,"Form.Item","`name` is only used for validate React element. If you are using Form.Item as layout display, please remove `name` instead."),childNode=children);return renderLayout(childNode,fieldId,meta,isRequired)})}export default FormItem;