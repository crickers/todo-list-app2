import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import CloseCircleFilled from"/node_modules/@ant-design/icons/es/icons/CloseCircleFilled.js";import{tuple}from"/node_modules/antd/es/_util/type.js";import{getInputClassName}from"/node_modules/antd/es/input/Input.js";import{cloneElement}from"/node_modules/antd/es/_util/reactNode.js";var ClearableInputType=tuple("text","input");export function hasPrefixSuffix(props){return!!(props.prefix||props.suffix||props.allowClear)}function hasAddon(props){return!!(props.addonBefore||props.addonAfter)}var ClearableLabeledInput=function(_React$Component){function ClearableLabeledInput(){var _this;return _classCallCheck(this,ClearableLabeledInput),_this=_super.apply(this,arguments),_this.containerRef=React.createRef(),_this.onInputMouseUp=function(e){var _a;if(null===(_a=_this.containerRef.current)||void 0===_a?void 0:_a.contains(e.target)){var triggerFocus=_this.props.triggerFocus;null===triggerFocus||void 0===triggerFocus?void 0:triggerFocus()}},_this}_inherits(ClearableLabeledInput,_React$Component);var _super=_createSuper(ClearableLabeledInput);return _createClass(ClearableLabeledInput,[{key:"renderClearIcon",value:function renderClearIcon(prefixCls){var _this$props=this.props,allowClear=_this$props.allowClear,value=_this$props.value,disabled=_this$props.disabled,readOnly=_this$props.readOnly,handleReset=_this$props.handleReset;if(!allowClear)return null;var className="".concat(prefixCls,"-clear-icon");return React.createElement(CloseCircleFilled,{onClick:handleReset,className:classNames(_defineProperty({},"".concat(className,"-hidden"),disabled||readOnly||!value),className),role:"button"})}},{key:"renderSuffix",value:function renderSuffix(prefixCls){var _this$props2=this.props,suffix=_this$props2.suffix,allowClear=_this$props2.allowClear;return suffix||allowClear?React.createElement("span",{className:"".concat(prefixCls,"-suffix")},this.renderClearIcon(prefixCls),suffix):null}},{key:"renderLabeledIcon",value:function renderLabeledIcon(prefixCls,element){var _classNames2,_this$props3=this.props,focused=_this$props3.focused,value=_this$props3.value,prefix=_this$props3.prefix,className=_this$props3.className,size=_this$props3.size,suffix=_this$props3.suffix,disabled=_this$props3.disabled,allowClear=_this$props3.allowClear,direction=_this$props3.direction,style=_this$props3.style,readOnly=_this$props3.readOnly,bordered=_this$props3.bordered,suffixNode=this.renderSuffix(prefixCls);if(!hasPrefixSuffix(this.props))return cloneElement(element,{value:value});var prefixNode=prefix?React.createElement("span",{className:"".concat(prefixCls,"-prefix")},prefix):null,affixWrapperCls=classNames("".concat(prefixCls,"-affix-wrapper"),(_classNames2={},_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-focused"),focused),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-disabled"),disabled),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-sm"),"small"===size),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-lg"),"large"===size),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-input-with-clear-btn"),suffix&&allowClear&&value),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-rtl"),"rtl"===direction),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-readonly"),readOnly),_defineProperty(_classNames2,"".concat(prefixCls,"-affix-wrapper-borderless"),!bordered),_defineProperty(_classNames2,"".concat(className),!hasAddon(this.props)&&className),_classNames2));return React.createElement("span",{ref:this.containerRef,className:affixWrapperCls,style:style,onMouseUp:this.onInputMouseUp},prefixNode,cloneElement(element,{style:null,value:value,className:getInputClassName(prefixCls,bordered,size,disabled)}),suffixNode)}},{key:"renderInputWithLabel",value:function renderInputWithLabel(prefixCls,labeledElement){var _classNames4,_this$props4=this.props,addonBefore=_this$props4.addonBefore,addonAfter=_this$props4.addonAfter,style=_this$props4.style,size=_this$props4.size,className=_this$props4.className,direction=_this$props4.direction;if(!hasAddon(this.props))return labeledElement;var wrapperClassName="".concat(prefixCls,"-group"),addonClassName="".concat(wrapperClassName,"-addon"),addonBeforeNode=addonBefore?React.createElement("span",{className:addonClassName},addonBefore):null,addonAfterNode=addonAfter?React.createElement("span",{className:addonClassName},addonAfter):null,mergedWrapperClassName=classNames("".concat(prefixCls,"-wrapper"),wrapperClassName,_defineProperty({},"".concat(wrapperClassName,"-rtl"),"rtl"===direction)),mergedGroupClassName=classNames("".concat(prefixCls,"-group-wrapper"),(_classNames4={},_defineProperty(_classNames4,"".concat(prefixCls,"-group-wrapper-sm"),"small"===size),_defineProperty(_classNames4,"".concat(prefixCls,"-group-wrapper-lg"),"large"===size),_defineProperty(_classNames4,"".concat(prefixCls,"-group-wrapper-rtl"),"rtl"===direction),_classNames4),className);return React.createElement("span",{className:mergedGroupClassName,style:style},React.createElement("span",{className:mergedWrapperClassName},addonBeforeNode,cloneElement(labeledElement,{style:null}),addonAfterNode))}},{key:"renderTextAreaWithClearIcon",value:function renderTextAreaWithClearIcon(prefixCls,element){var _classNames5,_this$props5=this.props,value=_this$props5.value,allowClear=_this$props5.allowClear,className=_this$props5.className,style=_this$props5.style,direction=_this$props5.direction,bordered=_this$props5.bordered;if(!allowClear)return cloneElement(element,{value:value});var affixWrapperCls=classNames("".concat(prefixCls,"-affix-wrapper"),"".concat(prefixCls,"-affix-wrapper-textarea-with-clear-btn"),(_classNames5={},_defineProperty(_classNames5,"".concat(prefixCls,"-affix-wrapper-rtl"),"rtl"===direction),_defineProperty(_classNames5,"".concat(prefixCls,"-affix-wrapper-borderless"),!bordered),_defineProperty(_classNames5,"".concat(className),!hasAddon(this.props)&&className),_classNames5));return React.createElement("span",{className:affixWrapperCls,style:style},cloneElement(element,{style:null,value:value}),this.renderClearIcon(prefixCls))}},{key:"render",value:function render(){var _this$props6=this.props,prefixCls=_this$props6.prefixCls,inputType=_this$props6.inputType,element=_this$props6.element;return inputType===ClearableInputType[0]?this.renderTextAreaWithClearIcon(prefixCls,element):this.renderInputWithLabel(prefixCls,this.renderLabeledIcon(prefixCls,element))}}]),ClearableLabeledInput}(React.Component);export default ClearableLabeledInput;