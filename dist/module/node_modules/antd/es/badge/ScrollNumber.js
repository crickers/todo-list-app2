import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.reverse.js";import"/node_modules/core-js/modules/es.regexp.to-string.js";import"/node_modules/core-js/modules/es.string.split.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t};import React from"c:\\node_modules\\react\\index.js";import{useState}from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import{ConfigContext}from"/node_modules/antd/es/config-provider.js";import{cloneElement}from"/node_modules/antd/es/_util/reactNode.js";function getNumberArray(num){return num?num.toString().split("").reverse().map(function(i){var current=+i;return isNaN(current)?i:current}):[]}function renderNumberList(position,className){for(var childrenToReturn=[],i=0;30>i;i++)childrenToReturn.push(React.createElement("p",{key:i.toString(),className:classNames(className,{current:position===i})},i%10));return childrenToReturn}var ScrollNumber=function ScrollNumber(_a){var customizePrefixCls=_a.prefixCls,customizeCount=_a.count,className=_a.className,style=_a.style,title=_a.title,show=_a.show,_a$component=_a.component,component=void 0===_a$component?"sup":_a$component,children=_a.children,_a$onAnimated=_a.onAnimated,onAnimated=void 0===_a$onAnimated?function(){}:_a$onAnimated,restProps=__rest(_a,["prefixCls","count","className","style","title","show","component","children","onAnimated"]),_useState=useState(!0),_useState2=_slicedToArray(_useState,2),animateStarted=_useState2[0],setAnimateStarted=_useState2[1],_useState3=useState(customizeCount),_useState4=_slicedToArray(_useState3,2),count=_useState4[0],setCount=_useState4[1],_useState5=useState(customizeCount),_useState6=_slicedToArray(_useState5,2),prevCount=_useState6[0],setPrevCount=_useState6[1],_useState7=useState(customizeCount),_useState8=_slicedToArray(_useState7,2),lastCount=_useState8[0],setLastCount=_useState8[1],_React$useContext=React.useContext(ConfigContext),getPrefixCls=_React$useContext.getPrefixCls,prefixCls=getPrefixCls("scroll-number",customizePrefixCls);prevCount!==customizeCount&&(setAnimateStarted(!0),setPrevCount(customizeCount)),React.useEffect(function(){setLastCount(count);var timeout;return animateStarted&&(timeout=setTimeout(function(){setAnimateStarted(!1),setCount(customizeCount),onAnimated()})),function(){timeout&&clearTimeout(timeout)}},[animateStarted,customizeCount,onAnimated]);var getPositionByNum=function getPositionByNum(num,i){var currentCount=Math.abs(+count),lstCount=Math.abs(+lastCount),currentDigit=Math.abs(getNumberArray(count)[i]),lastDigit=Math.abs(getNumberArray(lstCount)[i]);return animateStarted?10+num:currentCount>lstCount?currentDigit>=lastDigit?10+num:20+num:currentDigit<=lastDigit?10+num:num},newProps=_extends(_extends({},restProps),{"data-show":show,style:style,className:classNames(prefixCls,className),title:title}),renderCurrentNumber=function renderCurrentNumber(num,i){if("number"==typeof num){var position=getPositionByNum(num,i),removeTransition=animateStarted||void 0===getNumberArray(lastCount)[i];return React.createElement("span",{className:"".concat(prefixCls,"-only"),style:{transition:removeTransition?"none":void 0,msTransform:"translateY(".concat(100*-position,"%)"),WebkitTransform:"translateY(".concat(100*-position,"%)"),transform:"translateY(".concat(100*-position,"%)")},key:i},renderNumberList(position,"".concat(prefixCls,"-only-unit")))}return React.createElement("span",{key:"symbol",className:"".concat(prefixCls,"-symbol")},num)},numberNode=count&&0==+count%1?getNumberArray(count).map(function(num,i){return renderCurrentNumber(num,i)}).reverse():count;return style&&style.borderColor&&(newProps.style=_extends(_extends({},style),{boxShadow:"0 0 0 1px ".concat(style.borderColor," inset")})),children?cloneElement(children,function(oriProps){return{className:classNames("".concat(prefixCls,"-custom-component"),null===oriProps||void 0===oriProps?void 0:oriProps.className)}}):React.createElement(component,newProps,numberNode)};export default ScrollNumber;