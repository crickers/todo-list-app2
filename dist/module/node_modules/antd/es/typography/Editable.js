import"/node_modules/core-js/modules/es.string.replace.js";import"/node_modules/core-js/modules/es.string.trim.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import KeyCode from"/node_modules/rc-util/es/KeyCode.js";import EnterOutlined from"/node_modules/@ant-design/icons/es/icons/EnterOutlined.js";import TextArea from"/node_modules/antd/es/input/TextArea.js";var Editable=function Editable(_ref){var prefixCls=_ref.prefixCls,ariaLabel=_ref["aria-label"],className=_ref.className,style=_ref.style,direction=_ref.direction,maxLength=_ref.maxLength,_ref$autoSize=_ref.autoSize,autoSize=!(void 0!==_ref$autoSize)||_ref$autoSize,value=_ref.value,onSave=_ref.onSave,onCancel=_ref.onCancel,ref=React.useRef(),inComposition=React.useRef(!1),lastKeyCode=React.useRef(),_React$useState=React.useState(value),_React$useState2=_slicedToArray(_React$useState,2),current=_React$useState2[0],setCurrent=_React$useState2[1];React.useEffect(function(){setCurrent(value)},[value]),React.useEffect(function(){if(ref.current&&ref.current.resizableTextArea){var textArea=ref.current.resizableTextArea.textArea;textArea.focus();var length=textArea.value.length;textArea.setSelectionRange(length,length)}},[]);var confirmChange=function confirmChange(){onSave(current.trim())},textAreaClassName=classNames(prefixCls,"".concat(prefixCls,"-edit-content"),_defineProperty({},"".concat(prefixCls,"-rtl"),"rtl"===direction),className);return React.createElement("div",{className:textAreaClassName,style:style},React.createElement(TextArea,{ref:ref,maxLength:maxLength,value:current,onChange:function onChange(_ref2){var target=_ref2.target;setCurrent(target.value.replace(/[\n\r]/g,""))},onKeyDown:function onKeyDown(_ref3){var keyCode=_ref3.keyCode;inComposition.current||(lastKeyCode.current=keyCode)},onKeyUp:function onKeyUp(_ref4){var keyCode=_ref4.keyCode,ctrlKey=_ref4.ctrlKey,altKey=_ref4.altKey,metaKey=_ref4.metaKey,shiftKey=_ref4.shiftKey;lastKeyCode.current!==keyCode||inComposition.current||ctrlKey||altKey||metaKey||shiftKey||(keyCode===KeyCode.ENTER?confirmChange():keyCode===KeyCode.ESC&&onCancel())},onCompositionStart:function onCompositionStart(){inComposition.current=!0},onCompositionEnd:function onCompositionEnd(){inComposition.current=!1},onBlur:function onBlur(){confirmChange()},"aria-label":ariaLabel,autoSize:autoSize}),React.createElement(EnterOutlined,{className:"".concat(prefixCls,"-edit-content-confirm")}))};export default Editable;