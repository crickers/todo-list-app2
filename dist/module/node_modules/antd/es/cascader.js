import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.sort.js";import"/node_modules/core-js/modules/es.string.split.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _assertThisInitialized from"/node_modules/@babel/runtime/helpers/esm/assertThisInitialized.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t};import React from"c:\\node_modules\\react\\index.js";import RcCascader from"/node_modules/rc-cascader.js";import arrayTreeFilter from"/node_modules/array-tree-filter.js";import classNames from"/node_modules/classnames.js";import omit from"/node_modules/rc-util/es/omit.js";import KeyCode from"/node_modules/rc-util/es/KeyCode.js";import CloseCircleFilled from"/node_modules/@ant-design/icons/es/icons/CloseCircleFilled.js";import DownOutlined from"/node_modules/@ant-design/icons/es/icons/DownOutlined.js";import RightOutlined from"/node_modules/@ant-design/icons/es/icons/RightOutlined.js";import RedoOutlined from"/node_modules/@ant-design/icons/es/icons/RedoOutlined.js";import LeftOutlined from"/node_modules/@ant-design/icons/es/icons/LeftOutlined.js";import Input from"/node_modules/antd/es/input.js";import{ConfigConsumer}from"/node_modules/antd/es/config-provider.js";import LocaleReceiver from"/node_modules/antd/es/locale-provider/LocaleReceiver.js";import devWarning from"/node_modules/antd/es/_util/devWarning.js";import SizeContext from"/node_modules/antd/es/config-provider/SizeContext.js";import{replaceElement}from"/node_modules/antd/es/_util/reactNode.js";var defaultLimit=50,keepFilteredValueField="__KEEP_FILTERED_OPTION_VALUE";function highlightKeyword(str,keyword,prefixCls){return str.split(keyword).map(function(node,index){return 0===index?node:[React.createElement("span",{className:"".concat(prefixCls,"-menu-item-keyword"),key:"seperator"},keyword),node]})}function defaultFilterOption(inputValue,path,names){return path.some(function(option){return-1<option[names.label].indexOf(inputValue)})}function defaultRenderFilteredOption(inputValue,path,prefixCls,names){return path.map(function(option,index){var label=option[names.label],node=-1<label.indexOf(inputValue)?highlightKeyword(label,inputValue,prefixCls):label;return 0===index?node:[" / ",node]})}function defaultSortFilteredOption(a,b,inputValue,names){function callback(elem){return-1<elem[names.label].indexOf(inputValue)}return a.findIndex(callback)-b.findIndex(callback)}function getFieldNames(_ref){var fieldNames=_ref.fieldNames;return fieldNames}function getFilledFieldNames(props){var fieldNames=getFieldNames(props)||{},names={children:fieldNames.children||"children",label:fieldNames.label||"label",value:fieldNames.value||"value"};return names}function flattenTree(options,props){var ancestor=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[],names=getFilledFieldNames(props),flattenOptions=[],childrenName=names.children;return options.forEach(function(option){var path=ancestor.concat(option);!props.changeOnSelect&&option[childrenName]&&option[childrenName].length||flattenOptions.push(path),option[childrenName]&&(flattenOptions=flattenOptions.concat(flattenTree(option[childrenName],props,path)))}),flattenOptions}var defaultDisplayRender=function defaultDisplayRender(label){return label.join(" / ")};function warningValueNotExist(list){var fieldNames=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};(list||[]).forEach(function(item){var valueFieldName=fieldNames.value||"value";devWarning(valueFieldName in item,"Cascader","Not found `value` in `options`."),warningValueNotExist(item[fieldNames.children||"children"],fieldNames)})}function getEmptyNode(renderEmpty,names,notFoundContent){var _ref2;return _ref2={},_defineProperty(_ref2,names.value,"ANT_CASCADER_NOT_FOUND"),_defineProperty(_ref2,names.label,notFoundContent||renderEmpty("Cascader")),_defineProperty(_ref2,"disabled",!0),_defineProperty(_ref2,"isEmptyNode",!0),_ref2}var Cascader=function(_React$Component){function Cascader(props){var _this;return _classCallCheck(this,Cascader),_this=_super.call(this,props),_this.cachedOptions=[],_this.setValue=function(value){var selectedOptions=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];"value"in _this.props||_this.setState({value:value});var onChange=_this.props.onChange;onChange&&onChange(value,selectedOptions)},_this.saveInput=function(node){_this.input=node},_this.handleChange=function(value,selectedOptions){if(_this.setState({inputValue:""}),selectedOptions[0].__IS_FILTERED_OPTION){var unwrappedValue=void 0===selectedOptions[0][keepFilteredValueField]?value[0]:selectedOptions[0][keepFilteredValueField],unwrappedSelectedOptions=selectedOptions[0].path;return void _this.setValue(unwrappedValue,unwrappedSelectedOptions)}_this.setValue(value,selectedOptions)},_this.handlePopupVisibleChange=function(popupVisible){"popupVisible"in _this.props||_this.setState(function(state){return{popupVisible:popupVisible,inputFocused:popupVisible,inputValue:popupVisible?state.inputValue:""}});var onPopupVisibleChange=_this.props.onPopupVisibleChange;onPopupVisibleChange&&onPopupVisibleChange(popupVisible)},_this.handleInputBlur=function(){_this.setState({inputFocused:!1})},_this.handleInputClick=function(e){var _this$state=_this.state,inputFocused=_this$state.inputFocused,popupVisible=_this$state.popupVisible;(inputFocused||popupVisible)&&e.stopPropagation()},_this.handleKeyDown=function(e){(e.keyCode===KeyCode.BACKSPACE||e.keyCode===KeyCode.SPACE)&&e.stopPropagation()},_this.handleInputChange=function(e){var popupVisible=_this.state.popupVisible,inputValue=e.target.value;popupVisible||_this.handlePopupVisibleChange(!0),_this.setState({inputValue:inputValue})},_this.clearSelection=function(e){var inputValue=_this.state.inputValue;e.preventDefault(),e.stopPropagation(),inputValue?_this.setState({inputValue:""}):(_this.handlePopupVisibleChange(!1),_this.clearSelectionTimeout=setTimeout(function(){_this.setValue([])},200))},_this.renderCascader=function(_ref3,locale){var getContextPopupContainer=_ref3.getPopupContainer,getPrefixCls=_ref3.getPrefixCls,renderEmpty=_ref3.renderEmpty,direction=_ref3.direction;return React.createElement(SizeContext.Consumer,null,function(size){var _classNames,_classNames2,_classNames3,_classNames5,_assertThisInitialize=_assertThisInitialized(_this),props=_assertThisInitialize.props,state=_assertThisInitialize.state,customizePrefixCls=props.prefixCls,customizeInputPrefixCls=props.inputPrefixCls,children=props.children,_props$placeholder=props.placeholder,placeholder=void 0===_props$placeholder?locale.placeholder||"Please select":_props$placeholder,customizeSize=props.size,disabled=props.disabled,className=props.className,style=props.style,allowClear=props.allowClear,_props$showSearch=props.showSearch,showSearch=void 0!==_props$showSearch&&_props$showSearch,suffixIcon=props.suffixIcon,expandIcon=props.expandIcon,notFoundContent=props.notFoundContent,popupClassName=props.popupClassName,bordered=props.bordered,dropdownRender=props.dropdownRender,otherProps=__rest(props,["prefixCls","inputPrefixCls","children","placeholder","size","disabled","className","style","allowClear","showSearch","suffixIcon","expandIcon","notFoundContent","popupClassName","bordered","dropdownRender"]),mergedSize=customizeSize||size,value=state.value,inputFocused=state.inputFocused,isRtlLayout="rtl"===direction,prefixCls=getPrefixCls("cascader",customizePrefixCls),inputPrefixCls=getPrefixCls("input",customizeInputPrefixCls),sizeCls=classNames((_classNames={},_defineProperty(_classNames,"".concat(inputPrefixCls,"-lg"),"large"===mergedSize),_defineProperty(_classNames,"".concat(inputPrefixCls,"-sm"),"small"===mergedSize),_classNames)),clearIcon=allowClear&&!disabled&&0<value.length||state.inputValue?React.createElement(CloseCircleFilled,{className:"".concat(prefixCls,"-picker-clear"),onClick:_this.clearSelection}):null,arrowCls=classNames((_classNames2={},_defineProperty(_classNames2,"".concat(prefixCls,"-picker-arrow"),!0),_defineProperty(_classNames2,"".concat(prefixCls,"-picker-arrow-expand"),state.popupVisible),_classNames2)),pickerCls=classNames("".concat(prefixCls,"-picker"),(_classNames3={},_defineProperty(_classNames3,"".concat(prefixCls,"-picker-rtl"),isRtlLayout),_defineProperty(_classNames3,"".concat(prefixCls,"-picker-with-value"),state.inputValue),_defineProperty(_classNames3,"".concat(prefixCls,"-picker-disabled"),disabled),_defineProperty(_classNames3,"".concat(prefixCls,"-picker-").concat(mergedSize),!!mergedSize),_defineProperty(_classNames3,"".concat(prefixCls,"-picker-show-search"),!!showSearch),_defineProperty(_classNames3,"".concat(prefixCls,"-picker-focused"),inputFocused),_defineProperty(_classNames3,"".concat(prefixCls,"-picker-borderless"),!bordered),_classNames3),className),inputProps=omit(otherProps,["onChange","options","popupPlacement","transitionName","displayRender","onPopupVisibleChange","changeOnSelect","expandTrigger","popupVisible","getPopupContainer","loadData","filterOption","renderFilteredOption","sortFilteredOption","fieldNames"]),options=props.options,names=getFilledFieldNames(_this.props);options&&0<options.length?state.inputValue&&(options=_this.generateFilteredOptions(prefixCls,renderEmpty)):options=[getEmptyNode(renderEmpty,names,notFoundContent)],state.popupVisible?_this.cachedOptions=options:options=_this.cachedOptions;var dropdownMenuColumnStyle={},isNotFound=1===(options||[]).length&&options[0].isEmptyNode;isNotFound&&(dropdownMenuColumnStyle.height="auto");var resultListMatchInputWidth=!1!==showSearch.matchInputWidth;resultListMatchInputWidth&&(state.inputValue||isNotFound)&&_this.input&&(dropdownMenuColumnStyle.width=_this.input.input.offsetWidth);var inputIcon;inputIcon=suffixIcon?replaceElement(suffixIcon,React.createElement("span",{className:"".concat(prefixCls,"-picker-arrow")},suffixIcon),function(){var _classNames4;return{className:classNames((_classNames4={},_defineProperty(_classNames4,suffixIcon.props.className,suffixIcon.props.className),_defineProperty(_classNames4,"".concat(prefixCls,"-picker-arrow"),!0),_classNames4))}}):React.createElement(DownOutlined,{className:arrowCls});var expandIconNode,input=children||React.createElement("span",{style:style,className:pickerCls},React.createElement("span",{className:"".concat(prefixCls,"-picker-label")},_this.getLabel()),React.createElement(Input,_extends({},inputProps,{tabIndex:-1,ref:_this.saveInput,prefixCls:inputPrefixCls,placeholder:value&&0<value.length?void 0:placeholder,className:"".concat(prefixCls,"-input ").concat(sizeCls),value:state.inputValue,disabled:disabled,readOnly:!showSearch,autoComplete:inputProps.autoComplete||"off",onClick:showSearch?_this.handleInputClick:void 0,onBlur:showSearch?_this.handleInputBlur:void 0,onKeyDown:_this.handleKeyDown,onChange:showSearch?_this.handleInputChange:void 0})),clearIcon,inputIcon);expandIconNode=expandIcon?expandIcon:isRtlLayout?React.createElement(LeftOutlined,null):React.createElement(RightOutlined,null);var loadingIcon=React.createElement("span",{className:"".concat(prefixCls,"-menu-item-loading-icon")},React.createElement(RedoOutlined,{spin:!0})),getPopupContainer=props.getPopupContainer||getContextPopupContainer,rest=omit(props,["inputIcon","expandIcon","loadingIcon","bordered","className"]),rcCascaderPopupClassName=classNames(popupClassName,(_classNames5={},_defineProperty(_classNames5,"".concat(prefixCls,"-menu-").concat(direction),"rtl"===direction),_defineProperty(_classNames5,"".concat(prefixCls,"-menu-empty"),1===options.length&&"ANT_CASCADER_NOT_FOUND"===options[0].value),_classNames5));return React.createElement(RcCascader,_extends({},rest,{prefixCls:prefixCls,getPopupContainer:getPopupContainer,options:options,value:value,popupVisible:state.popupVisible,onPopupVisibleChange:_this.handlePopupVisibleChange,onChange:_this.handleChange,dropdownMenuColumnStyle:dropdownMenuColumnStyle,expandIcon:expandIconNode,loadingIcon:loadingIcon,popupClassName:rcCascaderPopupClassName,popupPlacement:_this.getPopupPlacement(direction),dropdownRender:dropdownRender}),input)})},_this.state={value:props.value||props.defaultValue||[],inputValue:"",inputFocused:!1,popupVisible:props.popupVisible,flattenOptions:props.showSearch?flattenTree(props.options,props):void 0,prevProps:props},_this}_inherits(Cascader,_React$Component);var _super=_createSuper(Cascader);return _createClass(Cascader,[{key:"componentWillUnmount",value:function componentWillUnmount(){this.clearSelectionTimeout&&clearTimeout(this.clearSelectionTimeout)}},{key:"getLabel",value:function getLabel(){var _this$props=this.props,options=_this$props.options,_this$props$displayRe=_this$props.displayRender,displayRender=void 0===_this$props$displayRe?defaultDisplayRender:_this$props$displayRe,names=getFilledFieldNames(this.props),value=this.state.value,unwrappedValue=Array.isArray(value[0])?value[0]:value,selectedOptions=arrayTreeFilter(options,function(o,level){return o[names.value]===unwrappedValue[level]},{childrenKeyName:names.children}),label=selectedOptions.length?selectedOptions.map(function(o){return o[names.label]}):value;return displayRender(label,selectedOptions)}},{key:"generateFilteredOptions",value:function generateFilteredOptions(prefixCls,renderEmpty){var filtered,_this2=this,_this$props2=this.props,showSearch=_this$props2.showSearch,notFoundContent=_this$props2.notFoundContent,names=getFilledFieldNames(this.props),_showSearch$filter=showSearch.filter,filter=void 0===_showSearch$filter?defaultFilterOption:_showSearch$filter,_showSearch$render=showSearch.render,render=void 0===_showSearch$render?defaultRenderFilteredOption:_showSearch$render,_showSearch$sort=showSearch.sort,sort=void 0===_showSearch$sort?defaultSortFilteredOption:_showSearch$sort,_showSearch$limit=showSearch.limit,limit=void 0===_showSearch$limit?defaultLimit:_showSearch$limit,_this$state2=this.state,_this$state2$flattenO=_this$state2.flattenOptions,flattenOptions=void 0===_this$state2$flattenO?[]:_this$state2$flattenO,inputValue=_this$state2.inputValue;if(0<limit){filtered=[];var matchCount=0;flattenOptions.some(function(path){var match=filter(_this2.state.inputValue,path,names);return match&&(filtered.push(path),matchCount+=1),matchCount>=limit})}else devWarning("number"!=typeof limit,"Cascader","'limit' of showSearch should be positive number or false."),filtered=flattenOptions.filter(function(path){return filter(_this2.state.inputValue,path,names)});if(filtered=filtered.sort(function(a,b){return sort(a,b,inputValue,names)}),0<filtered.length){var field=names.value===names.label?keepFilteredValueField:names.value;return filtered.map(function(path){var _ref4;return _ref4={__IS_FILTERED_OPTION:!0,path:path},_defineProperty(_ref4,field,path.map(function(o){return o[names.value]})),_defineProperty(_ref4,names.label,render(inputValue,path,prefixCls,names)),_defineProperty(_ref4,"disabled",path.some(function(o){return!!o.disabled})),_defineProperty(_ref4,"isEmptyNode",!0),_ref4})}return[getEmptyNode(renderEmpty,names,notFoundContent)]}},{key:"focus",value:function focus(){this.input.focus()}},{key:"blur",value:function blur(){this.input.blur()}},{key:"getPopupPlacement",value:function getPopupPlacement(){var direction=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"ltr",popupPlacement=this.props.popupPlacement;return void 0===popupPlacement?"rtl"===direction?"bottomRight":"bottomLeft":popupPlacement}},{key:"render",value:function render(){var _this3=this;return React.createElement(ConfigConsumer,null,function(configArgument){return React.createElement(LocaleReceiver,null,function(locale){return _this3.renderCascader(configArgument,locale)})})}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(nextProps,_ref5){var prevProps=_ref5.prevProps,newState={prevProps:nextProps};return"value"in nextProps&&(newState.value=nextProps.value||[]),"popupVisible"in nextProps&&(newState.popupVisible=nextProps.popupVisible),nextProps.showSearch&&prevProps.options!==nextProps.options&&(newState.flattenOptions=flattenTree(nextProps.options,nextProps)),newState}}]),Cascader}(React.Component);Cascader.defaultProps={transitionName:"slide-up",options:[],disabled:!1,allowClear:!0,bordered:!0};export default Cascader;