import"/node_modules/core-js/modules/es.array.iterator.js";import"/node_modules/core-js/modules/es.array.slice.js";import"/node_modules/core-js/modules/esnext.map.delete-all.js";import"/node_modules/core-js/modules/esnext.map.every.js";import"/node_modules/core-js/modules/esnext.map.filter.js";import"/node_modules/core-js/modules/esnext.map.find.js";import"/node_modules/core-js/modules/esnext.map.find-key.js";import"/node_modules/core-js/modules/esnext.map.includes.js";import"/node_modules/core-js/modules/esnext.map.key-of.js";import"/node_modules/core-js/modules/esnext.map.map-keys.js";import"/node_modules/core-js/modules/esnext.map.map-values.js";import"/node_modules/core-js/modules/esnext.map.merge.js";import"/node_modules/core-js/modules/esnext.map.reduce.js";import"/node_modules/core-js/modules/esnext.map.some.js";import"/node_modules/core-js/modules/esnext.map.update.js";import"/node_modules/core-js/modules/web.dom-collections.iterator.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import{useState,useMemo,useCallback}from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import ResizeObserver from"/node_modules/rc-resize-observer.js";import Item from"/node_modules/rc-overflow/es/Item.js";import{useBatchFrameState}from"/node_modules/rc-overflow/es/hooks/useBatchFrameState.js";var RESPONSIVE="responsive";function defaultRenderRest(omittedItems){return"+ ".concat(omittedItems.length," ...")}function Overflow(props,ref){function updateDisplayCount(count,notReady){setDisplayCount(count),notReady||setRestReady(count<data.length-1)}function onOverflowResize(_,element){setContainerWidth(element.clientWidth)}function registerSize(key,width){setItemWidths(function(origin){var clone=new Map(origin);return null===width?clone.delete(key):clone.set(key,width),clone})}function getItemWidth(index){return itemWidths.get(getKey(mergedData[index],index))}var _props$prefixCls=props.prefixCls,prefixCls=void 0===_props$prefixCls?"rc-overflow":_props$prefixCls,_props$data=props.data,data=void 0===_props$data?[]:_props$data,renderItem=props.renderItem,itemKey=props.itemKey,_props$itemWidth=props.itemWidth,itemWidth=void 0===_props$itemWidth?10:_props$itemWidth,style=props.style,className=props.className,maxCount=props.maxCount,_props$renderRest=props.renderRest,renderRest=void 0===_props$renderRest?defaultRenderRest:_props$renderRest,suffix=props.suffix,createUseState=useBatchFrameState(),_createUseState=createUseState(0),_createUseState2=_slicedToArray(_createUseState,2),containerWidth=_createUseState2[0],setContainerWidth=_createUseState2[1],_createUseState3=createUseState(new Map),_createUseState4=_slicedToArray(_createUseState3,2),itemWidths=_createUseState4[0],setItemWidths=_createUseState4[1],_createUseState5=createUseState(0),_createUseState6=_slicedToArray(_createUseState5,2),prevRestWidth=_createUseState6[0],setPrevRestWidth=_createUseState6[1],_createUseState7=createUseState(0),_createUseState8=_slicedToArray(_createUseState7,2),restWidth=_createUseState8[0],setRestWidth=_createUseState8[1],_createUseState9=createUseState(0),_createUseState10=_slicedToArray(_createUseState9,2),suffixWidth=_createUseState10[0],setSuffixWidth=_createUseState10[1],_useState=useState(null),_useState2=_slicedToArray(_useState,2),suffixFixedStart=_useState2[0],setSuffixFixedStart=_useState2[1],_useState3=useState(0),_useState4=_slicedToArray(_useState3,2),displayCount=_useState4[0],setDisplayCount=_useState4[1],_useState5=useState(!1),_useState6=_slicedToArray(_useState5,2),restReady=_useState6[0],setRestReady=_useState6[1],itemPrefixCls="".concat(prefixCls,"-item"),mergedRestWidth=Math.max(prevRestWidth,restWidth),isResponsive=data.length&&maxCount===RESPONSIVE,showRest=isResponsive||"number"==typeof maxCount&&data.length>maxCount,mergedData=useMemo(function(){var items=data;return isResponsive?items=data.slice(0,Math.min(data.length,containerWidth/itemWidth)):"number"==typeof maxCount&&(items=data.slice(0,maxCount)),items},[data,itemWidth,containerWidth,maxCount,isResponsive]),omittedItems=useMemo(function(){return isResponsive?data.slice(displayCount+1):data.slice(mergedData.length)},[data,mergedData,isResponsive,displayCount]),getKey=useCallback(function(item,index){var _ref;return"function"==typeof itemKey?itemKey(item):null!==(_ref=itemKey&&(null===item||void 0===item?void 0:item[itemKey]))&&void 0!==_ref?_ref:index},[itemKey]),mergedRenderItem=useCallback(renderItem||function(item){return item},[renderItem]);React.useLayoutEffect(function(){if(containerWidth&&mergedRestWidth&&mergedData){var totalWidth=suffixWidth,len=mergedData.length,lastIndex=len-1;if(!len)return updateDisplayCount(0),void setSuffixFixedStart(null);for(var currentItemWidth,i=0;i<len;i+=1){if(currentItemWidth=getItemWidth(i),void 0===currentItemWidth){updateDisplayCount(i-1,!0);break}if(totalWidth+=currentItemWidth,i==lastIndex-1&&totalWidth+getItemWidth(lastIndex)<=containerWidth){updateDisplayCount(lastIndex),setSuffixFixedStart(null);break}else if(totalWidth+mergedRestWidth>containerWidth){updateDisplayCount(i-1),setSuffixFixedStart(totalWidth-currentItemWidth-suffixWidth+restWidth);break}else if(i===lastIndex){updateDisplayCount(lastIndex),setSuffixFixedStart(totalWidth-suffixWidth);break}}suffix&&getItemWidth(0)+suffixWidth>containerWidth&&setSuffixFixedStart(null)}},[containerWidth,itemWidths,restWidth,suffixWidth,getKey,mergedData]);var displayRest=restReady&&!!omittedItems.length,suffixStyle={};null!==suffixFixedStart&&isResponsive&&(suffixStyle={position:"absolute",left:suffixFixedStart,top:0});var itemSharedProps={prefixCls:itemPrefixCls,responsive:isResponsive},overflowNode=React.createElement("div",{className:classNames(prefixCls,className),style:style,ref:ref},mergedData.map(function(item,index){var key=getKey(item,index);return React.createElement(Item,_extends({},itemSharedProps,{order:index,key:key,item:item,renderItem:mergedRenderItem,itemKey:key,registerSize:registerSize,display:index<=displayCount}))}),showRest?React.createElement(Item,_extends({},itemSharedProps,{order:displayRest?displayCount:Number.MAX_SAFE_INTEGER,className:"".concat(itemPrefixCls,"-rest"),registerSize:function registerOverflowSize(_,width){setRestWidth(width),setPrevRestWidth(restWidth)},display:displayRest}),"function"==typeof renderRest?renderRest(omittedItems):renderRest):null,suffix&&React.createElement(Item,_extends({},itemSharedProps,{order:displayCount,className:"".concat(itemPrefixCls,"-suffix"),registerSize:function registerSuffixSize(_,width){setSuffixWidth(width)},display:!0,style:suffixStyle}),suffix));return isResponsive&&(overflowNode=React.createElement(ResizeObserver,{onResize:onOverflowResize},overflowNode)),overflowNode}var ForwardOverflow=React.forwardRef(Overflow);ForwardOverflow.displayName="Overflow";export default ForwardOverflow;