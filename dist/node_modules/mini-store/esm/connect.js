import"/node_modules/core-js/modules/es.object.assign.js";var __extends=this&&this.__extends||function(){var _extendStatics=function extendStatics(d,b){return _extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])},_extendStatics(d,b)};return function(d,b){function __(){this.constructor=d}_extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),__assign=this&&this.__assign||function(){return __assign=Object.assign||function(t){for(var s,i=1,n=arguments.length;i<n;i++)for(var p in s=arguments[i],s)Object.prototype.hasOwnProperty.call(s,p)&&(t[p]=s[p]);return t},__assign.apply(this,arguments)};import React from"c:\\node_modules\\react\\index.js";import shallowEqual from"/node_modules/shallowequal.js";import hoistStatics from"/node_modules/hoist-non-react-statics.js";import{MiniStoreContext}from"/node_modules/mini-store/esm/Provider.js";function getDisplayName(WrappedComponent){return WrappedComponent.displayName||WrappedComponent.name||"Component"}var defaultMapStateToProps=function defaultMapStateToProps(){return{}};export function connect(mapStateToProps,options){void 0===options&&(options={});var finalMapStateToProps=mapStateToProps||defaultMapStateToProps;return function wrapWithConnect(WrappedComponent){var Connect=function(_super){function Connect(props,context){var _this=_super.call(this,props,context)||this;return _this.unsubscribe=null,_this.handleChange=function(){if(_this.unsubscribe){var nextState=finalMapStateToProps(_this.store.getState(),_this.props);_this.setState({subscribed:nextState})}},_this.store=_this.context,_this.state={subscribed:finalMapStateToProps(_this.store.getState(),props),store:_this.store,props:props},_this}return __extends(Connect,_super),Connect.getDerivedStateFromProps=function(props,prevState){return mapStateToProps&&2===mapStateToProps.length&&props!==prevState.props?{subscribed:finalMapStateToProps(prevState.store.getState(),props),props:props}:{props:props}},Connect.prototype.componentDidMount=function(){this.trySubscribe()},Connect.prototype.componentWillUnmount=function(){this.tryUnsubscribe()},Connect.prototype.shouldComponentUpdate=function(nextProps,nextState){return!shallowEqual(this.props,nextProps)||!shallowEqual(this.state.subscribed,nextState.subscribed)},Connect.prototype.trySubscribe=function(){!mapStateToProps||(this.unsubscribe=this.store.subscribe(this.handleChange),this.handleChange())},Connect.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},Connect.prototype.render=function(){var props=__assign(__assign(__assign({},this.props),this.state.subscribed),{store:this.store});return React.createElement(WrappedComponent,__assign({},props,{ref:this.props.miniStoreForwardedRef}))},Connect.displayName="Connect("+getDisplayName(WrappedComponent)+")",Connect.contextType=MiniStoreContext,Connect}(React.Component);if(options.forwardRef){var forwarded=React.forwardRef(function(props,ref){return React.createElement(Connect,__assign({},props,{miniStoreForwardedRef:ref}))});return hoistStatics(forwarded,WrappedComponent)}return hoistStatics(Connect,WrappedComponent)}}