import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.iterator.js";import"/node_modules/core-js/modules/es.regexp.to-string.js";import"/node_modules/core-js/modules/esnext.set.add-all.js";import"/node_modules/core-js/modules/esnext.set.delete-all.js";import"/node_modules/core-js/modules/esnext.set.difference.js";import"/node_modules/core-js/modules/esnext.set.every.js";import"/node_modules/core-js/modules/esnext.set.filter.js";import"/node_modules/core-js/modules/esnext.set.find.js";import"/node_modules/core-js/modules/esnext.set.intersection.js";import"/node_modules/core-js/modules/esnext.set.is-disjoint-from.js";import"/node_modules/core-js/modules/esnext.set.is-subset-of.js";import"/node_modules/core-js/modules/esnext.set.is-superset-of.js";import"/node_modules/core-js/modules/esnext.set.join.js";import"/node_modules/core-js/modules/esnext.set.map.js";import"/node_modules/core-js/modules/esnext.set.reduce.js";import"/node_modules/core-js/modules/esnext.set.some.js";import"/node_modules/core-js/modules/esnext.set.symmetric-difference.js";import"/node_modules/core-js/modules/esnext.set.union.js";import"/node_modules/core-js/modules/web.dom-collections.iterator.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import omit from"/node_modules/rc-util/es/omit.js";import classNames from"/node_modules/classnames.js";import DownOutlined from"/node_modules/@ant-design/icons/es/icons/DownOutlined.js";import Checkbox from"/node_modules/antd/es/checkbox.js";import Menu from"/node_modules/antd/es/menu.js";import Dropdown from"/node_modules/antd/es/dropdown.js";import Search from"/node_modules/antd/es/transfer/search.js";import DefaultListBody,{OmitProps}from"/node_modules/antd/es/transfer/ListBody.js";import{isValidElement}from"/node_modules/antd/es/_util/reactNode.js";var defaultRender=function defaultRender(){return null};function isRenderResultPlainObject(result){return result&&!isValidElement(result)&&"[object Object]"===Object.prototype.toString.call(result)}function getEnabledItemKeys(items){return items.filter(function(data){return!data.disabled}).map(function(data){return data.key})}var TransferList=function(_React$PureComponent){function TransferList(props){var _this;return _classCallCheck(this,TransferList),_this=_super.call(this,props),_this.defaultListBodyRef=React.createRef(),_this.handleFilter=function(e){var handleFilter=_this.props.handleFilter,filterValue=e.target.value;_this.setState({filterValue:filterValue}),handleFilter(e)},_this.handleClear=function(){var handleClear=_this.props.handleClear;_this.setState({filterValue:""}),handleClear()},_this.matchFilter=function(text,item){var filterValue=_this.state.filterValue,filterOption=_this.props.filterOption;return filterOption?filterOption(filterValue,item):0<=text.indexOf(filterValue)},_this.getCurrentPageItems=function(){},_this.renderListBody=function(renderList,props){var bodyContent=renderList?renderList(props):null,customize=!!bodyContent;return customize||(bodyContent=React.createElement(DefaultListBody,_extends({ref:_this.defaultListBodyRef},props))),{customize:customize,bodyContent:bodyContent}},_this.renderItem=function(item){var _this$props$render=_this.props.render,render=void 0===_this$props$render?defaultRender:_this$props$render,renderResult=render(item),isRenderResultPlain=isRenderResultPlainObject(renderResult);return{renderedText:isRenderResultPlain?renderResult.value:renderResult,renderedEl:isRenderResultPlain?renderResult.label:renderResult,item:item}},_this.getSelectAllLabel=function(selectedCount,totalCount){var _this$props=_this.props,itemsUnit=_this$props.itemsUnit,itemUnit=_this$props.itemUnit,selectAllLabel=_this$props.selectAllLabel;if(selectAllLabel)return"function"==typeof selectAllLabel?selectAllLabel({selectedCount:selectedCount,totalCount:totalCount}):selectAllLabel;var unit=1<totalCount?itemsUnit:itemUnit;return React.createElement(React.Fragment,null,(0<selectedCount?"".concat(selectedCount,"/"):"")+totalCount," ",unit)},_this.state={filterValue:""},_this}_inherits(TransferList,_React$PureComponent);var _super=_createSuper(TransferList);return _createClass(TransferList,[{key:"componentWillUnmount",value:function componentWillUnmount(){clearTimeout(this.triggerScrollTimer)}},{key:"getCheckStatus",value:function getCheckStatus(filteredItems){var checkedKeys=this.props.checkedKeys;return 0===checkedKeys.length?"none":filteredItems.every(function(item){return 0<=checkedKeys.indexOf(item.key)||!!item.disabled})?"all":"part"}},{key:"getFilteredItems",value:function getFilteredItems(dataSource,filterValue){var _this2=this,filteredItems=[],filteredRenderItems=[];return dataSource.forEach(function(item){var renderedItem=_this2.renderItem(item),renderedText=renderedItem.renderedText;return filterValue&&!_this2.matchFilter(renderedText,item)?null:void(filteredItems.push(item),filteredRenderItems.push(renderedItem))}),{filteredItems:filteredItems,filteredRenderItems:filteredRenderItems}}},{key:"getListBody",value:function getListBody(prefixCls,searchPlaceholder,filterValue,filteredItems,notFoundContent,filteredRenderItems,checkedKeys,renderList,showSearch,disabled){var bodyNode,search=showSearch?React.createElement("div",{className:"".concat(prefixCls,"-body-search-wrapper")},React.createElement(Search,{prefixCls:"".concat(prefixCls,"-search"),onChange:this.handleFilter,handleClear:this.handleClear,placeholder:searchPlaceholder,value:filterValue,disabled:disabled})):null,_this$renderListBody=this.renderListBody(renderList,_extends(_extends({},omit(this.props,OmitProps)),{filteredItems:filteredItems,filteredRenderItems:filteredRenderItems,selectedKeys:checkedKeys})),bodyContent=_this$renderListBody.bodyContent,customize=_this$renderListBody.customize;return bodyNode=customize?React.createElement("div",{className:"".concat(prefixCls,"-body-customize-wrapper")},bodyContent):filteredItems.length?bodyContent:React.createElement("div",{className:"".concat(prefixCls,"-body-not-found")},notFoundContent),React.createElement("div",{className:classNames(showSearch?"".concat(prefixCls,"-body ").concat(prefixCls,"-body-with-search"):"".concat(prefixCls,"-body"))},search,bodyNode)}},{key:"getCheckBox",value:function getCheckBox(filteredItems,onItemSelectAll,showSelectAll,disabled){var checkStatus=this.getCheckStatus(filteredItems),checkedAll="all"===checkStatus,checkAllCheckbox=!1!==showSelectAll&&React.createElement(Checkbox,{disabled:disabled,checked:checkedAll,indeterminate:"part"===checkStatus,onChange:function onChange(){onItemSelectAll(filteredItems.filter(function(item){return!item.disabled}).map(function(_ref){var key=_ref.key;return key}),!checkedAll)}});return checkAllCheckbox}},{key:"render",value:function render(){var _classNames,_this3=this,filterValue=this.state.filterValue,_this$props2=this.props,prefixCls=_this$props2.prefixCls,dataSource=_this$props2.dataSource,titleText=_this$props2.titleText,checkedKeys=_this$props2.checkedKeys,disabled=_this$props2.disabled,footer=_this$props2.footer,showSearch=_this$props2.showSearch,style=_this$props2.style,searchPlaceholder=_this$props2.searchPlaceholder,notFoundContent=_this$props2.notFoundContent,selectAll=_this$props2.selectAll,selectCurrent=_this$props2.selectCurrent,selectInvert=_this$props2.selectInvert,removeAll=_this$props2.removeAll,removeCurrent=_this$props2.removeCurrent,renderList=_this$props2.renderList,onItemSelectAll=_this$props2.onItemSelectAll,onItemRemove=_this$props2.onItemRemove,showSelectAll=_this$props2.showSelectAll,showRemove=_this$props2.showRemove,pagination=_this$props2.pagination,footerDom=footer&&footer(this.props),listCls=classNames(prefixCls,(_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-with-pagination"),pagination),_defineProperty(_classNames,"".concat(prefixCls,"-with-footer"),footerDom),_classNames)),_this$getFilteredItem=this.getFilteredItems(dataSource,filterValue),filteredItems=_this$getFilteredItem.filteredItems,filteredRenderItems=_this$getFilteredItem.filteredRenderItems,listBody=this.getListBody(prefixCls,searchPlaceholder,filterValue,filteredItems,notFoundContent,filteredRenderItems,checkedKeys,renderList,showSearch,disabled),listFooter=footerDom?React.createElement("div",{className:"".concat(prefixCls,"-footer")},footerDom):null,checkAllCheckbox=!showRemove&&!pagination&&this.getCheckBox(filteredItems,onItemSelectAll,showSelectAll,disabled),menu=null;menu=showRemove?React.createElement(Menu,null,pagination&&React.createElement(Menu.Item,{onClick:function onClick(){var _a,pageKeys=getEnabledItemKeys(((null===(_a=_this3.defaultListBodyRef.current)||void 0===_a?void 0:_a.getItems())||[]).map(function(entity){return entity.item}));null===onItemRemove||void 0===onItemRemove?void 0:onItemRemove(pageKeys)}},removeCurrent),React.createElement(Menu.Item,{onClick:function onClick(){null===onItemRemove||void 0===onItemRemove?void 0:onItemRemove(getEnabledItemKeys(filteredItems))}},removeAll)):React.createElement(Menu,null,React.createElement(Menu.Item,{onClick:function onClick(){var keys=getEnabledItemKeys(filteredItems);onItemSelectAll(keys,keys.length!==checkedKeys.length)}},selectAll),pagination&&React.createElement(Menu.Item,{onClick:function onClick(){var _a,pageItems=(null===(_a=_this3.defaultListBodyRef.current)||void 0===_a?void 0:_a.getItems())||[];onItemSelectAll(getEnabledItemKeys(pageItems.map(function(entity){return entity.item})),!0)}},selectCurrent),React.createElement(Menu.Item,{onClick:function onClick(){var _a,availableKeys;availableKeys=pagination?getEnabledItemKeys(((null===(_a=_this3.defaultListBodyRef.current)||void 0===_a?void 0:_a.getItems())||[]).map(function(entity){return entity.item})):getEnabledItemKeys(filteredItems);var checkedKeySet=new Set(checkedKeys),newCheckedKeys=[],newUnCheckedKeys=[];availableKeys.forEach(function(key){checkedKeySet.has(key)?newUnCheckedKeys.push(key):newCheckedKeys.push(key)}),onItemSelectAll(newCheckedKeys,!0),onItemSelectAll(newUnCheckedKeys,!1)}},selectInvert));var dropdown=React.createElement(Dropdown,{className:"".concat(prefixCls,"-header-dropdown"),overlay:menu,disabled:disabled},React.createElement(DownOutlined,null));return React.createElement("div",{className:listCls,style:style},React.createElement("div",{className:"".concat(prefixCls,"-header")},checkAllCheckbox,dropdown,React.createElement("span",{className:"".concat(prefixCls,"-header-selected")},this.getSelectAllLabel(checkedKeys.length,filteredItems.length)),React.createElement("span",{className:"".concat(prefixCls,"-header-title")},titleText)),listBody,listFooter)}}]),TransferList}(React.PureComponent);export{TransferList as default};TransferList.defaultProps={dataSource:[],titleText:"",showSearch:!1};