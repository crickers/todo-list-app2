import"/node_modules/core-js/modules/es.array.index-of.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";var __rest=this&&this.__rest||function(s,e){var t={};for(var p in s)Object.prototype.hasOwnProperty.call(s,p)&&0>e.indexOf(p)&&(t[p]=s[p]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var i=0,p=Object.getOwnPropertySymbols(s);i<p.length;i++)0>e.indexOf(p[i])&&Object.prototype.propertyIsEnumerable.call(s,p[i])&&(t[p[i]]=s[p[i]]);return t};import React from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import omit from"/node_modules/rc-util/es/omit.js";import debounce from"/node_modules/lodash/debounce.js";import{ConfigConsumer}from"/node_modules/antd/es/config-provider.js";import{tuple}from"/node_modules/antd/es/_util/type.js";import{isValidElement,cloneElement}from"/node_modules/antd/es/_util/reactNode.js";var SpinSizes=tuple("small","default","large"),defaultIndicator=null;function renderIndicator(prefixCls,props){var indicator=props.indicator,dotClassName="".concat(prefixCls,"-dot");return null===indicator?null:isValidElement(indicator)?cloneElement(indicator,{className:classNames(indicator.props.className,dotClassName)}):isValidElement(defaultIndicator)?cloneElement(defaultIndicator,{className:classNames(defaultIndicator.props.className,dotClassName)}):React.createElement("span",{className:classNames(dotClassName,"".concat(prefixCls,"-dot-spin"))},React.createElement("i",{className:"".concat(prefixCls,"-dot-item")}),React.createElement("i",{className:"".concat(prefixCls,"-dot-item")}),React.createElement("i",{className:"".concat(prefixCls,"-dot-item")}),React.createElement("i",{className:"".concat(prefixCls,"-dot-item")}))}function shouldDelay(spinning,delay){return!!spinning&&!!delay&&!isNaN(+delay)}var Spin=function(_React$Component){function Spin(props){var _this;_classCallCheck(this,Spin),_this=_super.call(this,props),_this.debouncifyUpdateSpinning=function(props){var _ref=props||_this.props,delay=_ref.delay;delay&&(_this.cancelExistingSpin(),_this.updateSpinning=debounce(_this.originalUpdateSpinning,delay))},_this.updateSpinning=function(){var spinning=_this.props.spinning,currentSpinning=_this.state.spinning;currentSpinning!==spinning&&_this.setState({spinning:spinning})},_this.renderSpin=function(_ref2){var _classNames,getPrefixCls=_ref2.getPrefixCls,direction=_ref2.direction,_a=_this.props,customizePrefixCls=_a.prefixCls,className=_a.className,size=_a.size,tip=_a.tip,wrapperClassName=_a.wrapperClassName,style=_a.style,restProps=__rest(_a,["prefixCls","className","size","tip","wrapperClassName","style"]),spinning=_this.state.spinning,prefixCls=getPrefixCls("spin",customizePrefixCls),spinClassName=classNames(prefixCls,(_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-sm"),"small"===size),_defineProperty(_classNames,"".concat(prefixCls,"-lg"),"large"===size),_defineProperty(_classNames,"".concat(prefixCls,"-spinning"),spinning),_defineProperty(_classNames,"".concat(prefixCls,"-show-text"),!!tip),_defineProperty(_classNames,"".concat(prefixCls,"-rtl"),"rtl"===direction),_classNames),className),divProps=omit(restProps,["spinning","delay","indicator"]),spinElement=React.createElement("div",_extends({},divProps,{style:style,className:spinClassName}),renderIndicator(prefixCls,_this.props),tip?React.createElement("div",{className:"".concat(prefixCls,"-text")},tip):null);if(_this.isNestedPattern()){var containerClassName=classNames("".concat(prefixCls,"-container"),_defineProperty({},"".concat(prefixCls,"-blur"),spinning));return React.createElement("div",_extends({},divProps,{className:classNames("".concat(prefixCls,"-nested-loading"),wrapperClassName)}),spinning&&React.createElement("div",{key:"loading"},spinElement),React.createElement("div",{className:containerClassName,key:"container"},_this.props.children))}return spinElement};var spinning=props.spinning,delay=props.delay,shouldBeDelayed=shouldDelay(spinning,delay);return _this.state={spinning:spinning&&!shouldBeDelayed},_this.originalUpdateSpinning=_this.updateSpinning,_this.debouncifyUpdateSpinning(props),_this}_inherits(Spin,_React$Component);var _super=_createSuper(Spin);return _createClass(Spin,[{key:"componentDidMount",value:function componentDidMount(){this.updateSpinning()}},{key:"componentDidUpdate",value:function componentDidUpdate(){this.debouncifyUpdateSpinning(),this.updateSpinning()}},{key:"componentWillUnmount",value:function componentWillUnmount(){this.cancelExistingSpin()}},{key:"cancelExistingSpin",value:function cancelExistingSpin(){var updateSpinning=this.updateSpinning;updateSpinning&&updateSpinning.cancel&&updateSpinning.cancel()}},{key:"isNestedPattern",value:function isNestedPattern(){return!!(this.props&&"undefined"!=typeof this.props.children)}},{key:"render",value:function render(){return React.createElement(ConfigConsumer,null,this.renderSpin)}}],[{key:"setDefaultIndicator",value:function setDefaultIndicator(indicator){defaultIndicator=indicator}}]),Spin}(React.Component);Spin.defaultProps={spinning:!0,size:"default",wrapperClassName:""};export default Spin;