import _toConsumableArray from"/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import React from"c:\\node_modules\\react\\index.js";import CSSMotion,{CSSMotionList}from"/node_modules/rc-motion.js";import classNames from"/node_modules/classnames.js";import LoadingOutlined from"/node_modules/@ant-design/icons/es/icons/LoadingOutlined.js";import PaperClipOutlined from"/node_modules/@ant-design/icons/es/icons/PaperClipOutlined.js";import PictureTwoTone from"/node_modules/@ant-design/icons/es/icons/PictureTwoTone.js";import FileTwoTone from"/node_modules/@ant-design/icons/es/icons/FileTwoTone.js";import{cloneElement,isValidElement}from"/node_modules/antd/es/_util/reactNode.js";import{previewImage,isImageUrl}from"/node_modules/antd/es/upload/utils.js";import collapseMotion from"/node_modules/antd/es/_util/motion.js";import{ConfigContext}from"/node_modules/antd/es/config-provider.js";import Button from"/node_modules/antd/es/button.js";import useForceUpdate from"/node_modules/antd/es/_util/hooks/useForceUpdate.js";import ListItem from"/node_modules/antd/es/upload/UploadList/ListItem.js";var listItemMotion=_extends({},collapseMotion);delete listItemMotion.onAppearEnd,delete listItemMotion.onEnterEnd,delete listItemMotion.onLeaveEnd;var InternalUploadList=function InternalUploadList(_ref,ref){var _classNames,listType=_ref.listType,previewFile=_ref.previewFile,onPreview=_ref.onPreview,onDownload=_ref.onDownload,onRemove=_ref.onRemove,locale=_ref.locale,iconRender=_ref.iconRender,isImgUrl=_ref.isImageUrl,customizePrefixCls=_ref.prefixCls,_ref$items=_ref.items,items=void 0===_ref$items?[]:_ref$items,showPreviewIcon=_ref.showPreviewIcon,showRemoveIcon=_ref.showRemoveIcon,showDownloadIcon=_ref.showDownloadIcon,removeIcon=_ref.removeIcon,downloadIcon=_ref.downloadIcon,progress=_ref.progress,appendAction=_ref.appendAction,itemRender=_ref.itemRender,forceUpdate=useForceUpdate(),_React$useState=React.useState(!1),_React$useState2=_slicedToArray(_React$useState,2),motionAppear=_React$useState2[0],setMotionAppear=_React$useState2[1];React.useEffect(function(){"picture"!==listType&&"picture-card"!==listType||(items||[]).forEach(function(file){"undefined"!=typeof document&&1&&window.FileReader&&window.File&&(file.originFileObj instanceof File||file.originFileObj instanceof Blob)&&void 0===file.thumbUrl&&(file.thumbUrl="",previewFile&&previewFile(file.originFileObj).then(function(previewDataUrl){file.thumbUrl=previewDataUrl||"",forceUpdate()}))})},[listType,items,previewFile]),React.useEffect(function(){setMotionAppear(!0)},[]);var onInternalPreview=function onInternalPreview(file,e){if(onPreview)return e.preventDefault(),onPreview(file)},onInternalDownload=function onInternalDownload(file){"function"==typeof onDownload?onDownload(file):file.url&&window.open(file.url)},onInternalClose=function onInternalClose(file){onRemove&&onRemove(file)},internalIconRender=function internalIconRender(file){if(iconRender)return iconRender(file,listType);var isLoading="uploading"===file.status,fileIcon=isImgUrl&&isImgUrl(file)?React.createElement(PictureTwoTone,null):React.createElement(FileTwoTone,null),icon=isLoading?React.createElement(LoadingOutlined,null):React.createElement(PaperClipOutlined,null);return"picture"===listType?icon=isLoading?React.createElement(LoadingOutlined,null):fileIcon:"picture-card"===listType&&(icon=isLoading?locale.uploading:fileIcon),icon},actionIconRender=function actionIconRender(customIcon,callback,prefixCls,title){var btnProps={type:"text",size:"small",title:title,onClick:function onClick(e){callback(),isValidElement(customIcon)&&customIcon.props.onClick&&customIcon.props.onClick(e)},className:"".concat(prefixCls,"-list-item-card-actions-btn")};if(isValidElement(customIcon)){var btnIcon=cloneElement(customIcon,_extends(_extends({},customIcon.props),{onClick:function onClick(){}}));return React.createElement(Button,_extends({},btnProps,{icon:btnIcon}))}return React.createElement(Button,btnProps,React.createElement("span",null,customIcon))};React.useImperativeHandle(ref,function(){return{handlePreview:onInternalPreview,handleDownload:onInternalDownload}});var _React$useContext=React.useContext(ConfigContext),getPrefixCls=_React$useContext.getPrefixCls,direction=_React$useContext.direction,prefixCls=getPrefixCls("upload",customizePrefixCls),listClassNames=classNames((_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-list"),!0),_defineProperty(_classNames,"".concat(prefixCls,"-list-").concat(listType),!0),_defineProperty(_classNames,"".concat(prefixCls,"-list-rtl"),"rtl"===direction),_classNames)),motionKeyList=_toConsumableArray(items.map(function(file){return{key:file.uid,file:file}})),animationDirection="picture-card"===listType?"animate-inline":"animate",motionConfig={motionName:"".concat(prefixCls,"-").concat(animationDirection),keys:motionKeyList,motionAppear:motionAppear};return"picture-card"!==listType&&(motionConfig=_extends(_extends({},listItemMotion),motionConfig)),React.createElement("div",{className:listClassNames},React.createElement(CSSMotionList,_extends({},motionConfig,{component:!1}),function(_ref2){var key=_ref2.key,file=_ref2.file,motionClassName=_ref2.className,motionStyle=_ref2.style;return React.createElement(ListItem,{key:key,locale:locale,prefixCls:prefixCls,className:motionClassName,style:motionStyle,file:file,items:items,progress:progress,listType:listType,isImgUrl:isImgUrl,showPreviewIcon:showPreviewIcon,showRemoveIcon:showRemoveIcon,showDownloadIcon:showDownloadIcon,removeIcon:removeIcon,downloadIcon:downloadIcon,iconRender:internalIconRender,actionIconRender:actionIconRender,itemRender:itemRender,onPreview:onInternalPreview,onDownload:onInternalDownload,onClose:onInternalClose})}),appendAction&&React.createElement(CSSMotion,motionConfig,function(_ref3){var motionClassName=_ref3.className,motionStyle=_ref3.style;return cloneElement(appendAction,function(oriProps){return{className:classNames(oriProps.className,motionClassName),style:_extends(_extends({},motionStyle),oriProps.style)}})}))},UploadList=React.forwardRef(InternalUploadList);UploadList.displayName="UploadList",UploadList.defaultProps={listType:"text",progress:{strokeWidth:2,showInfo:!1},showRemoveIcon:!0,showDownloadIcon:!1,showPreviewIcon:!0,previewFile:previewImage,isImageUrl:isImageUrl};export default UploadList;