import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import CSSMotion from"/node_modules/rc-motion.js";import classNames from"/node_modules/classnames.js";import EyeOutlined from"/node_modules/@ant-design/icons/es/icons/EyeOutlined.js";import DeleteOutlined from"/node_modules/@ant-design/icons/es/icons/DeleteOutlined.js";import DownloadOutlined from"/node_modules/@ant-design/icons/es/icons/DownloadOutlined.js";import Tooltip from"/node_modules/antd/es/tooltip.js";import Progress from"/node_modules/antd/es/progress.js";var ListItem=React.forwardRef(function(_ref,ref){var _classNames3,_a,_b,prefixCls=_ref.prefixCls,className=_ref.className,style=_ref.style,locale=_ref.locale,listType=_ref.listType,file=_ref.file,items=_ref.items,progressProps=_ref.progress,iconRender=_ref.iconRender,actionIconRender=_ref.actionIconRender,itemRender=_ref.itemRender,isImgUrl=_ref.isImgUrl,showPreviewIcon=_ref.showPreviewIcon,showRemoveIcon=_ref.showRemoveIcon,showDownloadIcon=_ref.showDownloadIcon,customRemoveIcon=_ref.removeIcon,customDownloadIcon=_ref.downloadIcon,onPreview=_ref.onPreview,onDownload=_ref.onDownload,onClose=_ref.onClose,_React$useState=React.useState(!1),_React$useState2=_slicedToArray(_React$useState,2),showProgress=_React$useState2[0],setShowProgress=_React$useState2[1],progressRafRef=React.useRef();React.useEffect(function(){return progressRafRef.current=setTimeout(function(){setShowProgress(!0)},300),function(){window.clearTimeout(progressRafRef.current)}},[]);var spanClassName="".concat(prefixCls,"-span"),iconNode=iconRender(file),icon=React.createElement("div",{className:"".concat(prefixCls,"-text-icon")},iconNode);if("picture"===listType||"picture-card"===listType)if("uploading"===file.status||!file.thumbUrl&&!file.url){var _classNames,uploadingClassName=classNames((_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-list-item-thumbnail"),!0),_defineProperty(_classNames,"".concat(prefixCls,"-list-item-file"),"uploading"!==file.status),_classNames));icon=React.createElement("div",{className:uploadingClassName},iconNode)}else{var _classNames2,thumbnail=(null===isImgUrl||void 0===isImgUrl?void 0:isImgUrl(file))?React.createElement("img",{src:file.thumbUrl||file.url,alt:file.name,className:"".concat(prefixCls,"-list-item-image")}):iconNode,aClassName=classNames((_classNames2={},_defineProperty(_classNames2,"".concat(prefixCls,"-list-item-thumbnail"),!0),_defineProperty(_classNames2,"".concat(prefixCls,"-list-item-file"),isImgUrl&&!isImgUrl(file)),_classNames2));icon=React.createElement("a",{className:aClassName,onClick:function onClick(e){return onPreview(file,e)},href:file.url||file.thumbUrl,target:"_blank",rel:"noopener noreferrer"},thumbnail)}var message,infoUploadingClass=classNames((_classNames3={},_defineProperty(_classNames3,"".concat(prefixCls,"-list-item"),!0),_defineProperty(_classNames3,"".concat(prefixCls,"-list-item-").concat(file.status),!0),_defineProperty(_classNames3,"".concat(prefixCls,"-list-item-list-type-").concat(listType),!0),_classNames3)),linkProps="string"==typeof file.linkProps?JSON.parse(file.linkProps):file.linkProps,removeIcon=showRemoveIcon?actionIconRender(("function"==typeof customRemoveIcon?customRemoveIcon(file):customRemoveIcon)||React.createElement(DeleteOutlined,null),function(){return onClose(file)},prefixCls,locale.removeFile):null,downloadIcon=showDownloadIcon&&"done"===file.status?actionIconRender(("function"==typeof customDownloadIcon?customDownloadIcon(file):customDownloadIcon)||React.createElement(DownloadOutlined,null),function(){return onDownload(file)},prefixCls,locale.downloadFile):null,downloadOrDelete="picture-card"!==listType&&React.createElement("span",{key:"download-delete",className:classNames("".concat(prefixCls,"-list-item-card-actions"),{picture:"picture"===listType})},downloadIcon,removeIcon),listItemNameClass=classNames("".concat(prefixCls,"-list-item-name")),preview=file.url?[React.createElement("a",_extends({key:"view",target:"_blank",rel:"noopener noreferrer",className:listItemNameClass,title:file.name},linkProps,{href:file.url,onClick:function onClick(e){return onPreview(file,e)}}),file.name),downloadOrDelete]:[React.createElement("span",{key:"view",className:listItemNameClass,onClick:function onClick(e){return onPreview(file,e)},title:file.name},file.name),downloadOrDelete],previewIcon=showPreviewIcon?React.createElement("a",{href:file.url||file.thumbUrl,target:"_blank",rel:"noopener noreferrer",style:file.url||file.thumbUrl?void 0:{pointerEvents:"none",opacity:.5},onClick:function onClick(e){return onPreview(file,e)},title:locale.previewFile},React.createElement(EyeOutlined,null)):null,actions="picture-card"===listType&&"uploading"!==file.status&&React.createElement("span",{className:"".concat(prefixCls,"-list-item-actions")},previewIcon,"done"===file.status&&downloadIcon,removeIcon);message=file.response&&"string"==typeof file.response?file.response:(null===(_a=file.error)||void 0===_a?void 0:_a.statusText)||(null===(_b=file.error)||void 0===_b?void 0:_b.message)||locale.uploadError;var iconAndPreview=React.createElement("span",{className:spanClassName},icon,preview),dom=React.createElement("div",{className:infoUploadingClass},React.createElement("div",{className:"".concat(prefixCls,"-list-item-info")},iconAndPreview),actions,showProgress&&React.createElement(CSSMotion,{motionName:"fade",visible:"uploading"===file.status},function(_ref2){var motionClassName=_ref2.className,loadingProgress="percent"in file?React.createElement(Progress,_extends({},progressProps,{type:"line",percent:file.percent})):null;return React.createElement("div",{className:classNames("".concat(prefixCls,"-list-item-progress"),motionClassName)},loadingProgress)})),listContainerNameClass=classNames("".concat(prefixCls,"-list-").concat(listType,"-container"),className),item="error"===file.status?React.createElement(Tooltip,{title:message,getPopupContainer:function getPopupContainer(node){return node.parentNode}},dom):dom;return React.createElement("div",{className:listContainerNameClass,style:style,ref:ref},itemRender?itemRender(item,file,items):item)});export default ListItem;