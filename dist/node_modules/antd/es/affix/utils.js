import addEventListener from"/node_modules/rc-util/es/Dom/addEventListener.js";export function getTargetRect(target){return target===window?{top:0,bottom:window.innerHeight}:target.getBoundingClientRect()}export function getFixedTop(placeholderReact,targetRect,offsetTop){return void 0!==offsetTop&&targetRect.top>placeholderReact.top-offsetTop?offsetTop+targetRect.top:void 0}export function getFixedBottom(placeholderReact,targetRect,offsetBottom){if(offsetBottom!==void 0&&targetRect.bottom<placeholderReact.bottom+offsetBottom){var targetBottomOffset=window.innerHeight-targetRect.bottom;return offsetBottom+targetBottomOffset}}var TRIGGER_EVENTS=["resize","scroll","touchstart","touchmove","touchend","pageshow","load"],observerEntities=[];export function getObserverEntities(){return observerEntities}export function addObserveTarget(target,affix){if(target){var entity=observerEntities.find(function(item){return item.target===target});entity?entity.affixList.push(affix):(entity={target:target,affixList:[affix],eventHandlers:{}},observerEntities.push(entity),TRIGGER_EVENTS.forEach(function(eventName){entity.eventHandlers[eventName]=addEventListener(target,eventName,function(){entity.affixList.forEach(function(targetAffix){targetAffix.lazyUpdatePosition()})})}))}}export function removeObserveTarget(affix){var observerEntity=observerEntities.find(function(oriObserverEntity){var hasAffix=oriObserverEntity.affixList.some(function(item){return item===affix});return hasAffix&&(oriObserverEntity.affixList=oriObserverEntity.affixList.filter(function(item){return item!==affix})),hasAffix});observerEntity&&0===observerEntity.affixList.length&&(observerEntities=observerEntities.filter(function(item){return item!==observerEntity}),TRIGGER_EVENTS.forEach(function(eventName){var handler=observerEntity.eventHandlers[eventName];handler&&handler.remove&&handler.remove()}))}