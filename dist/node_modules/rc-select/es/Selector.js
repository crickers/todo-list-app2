import"/node_modules/core-js/modules/es.object.assign.js";import"/node_modules/core-js/modules/es.string.includes.js";import"/node_modules/core-js/modules/es.string.replace.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import{useRef}from"c:\\node_modules\\react\\index.js";import KeyCode from"/node_modules/rc-util/es/KeyCode.js";import MultipleSelector from"/node_modules/rc-select/es/Selector/MultipleSelector.js";import SingleSelector from"/node_modules/rc-select/es/Selector/SingleSelector.js";import useLock from"/node_modules/rc-select/es/hooks/useLock.js";var Selector=function Selector(props,ref){var inputRef=useRef(null),compositionStatusRef=useRef(!1),prefixCls=props.prefixCls,multiple=props.multiple,open=props.open,mode=props.mode,showSearch=props.showSearch,tokenWithEnter=props.tokenWithEnter,onSearch=props.onSearch,onSearchSubmit=props.onSearchSubmit,onToggleOpen=props.onToggleOpen,onInputKeyDown=props.onInputKeyDown,domRef=props.domRef;React.useImperativeHandle(ref,function(){return{focus:function focus(){inputRef.current.focus()},blur:function blur(){inputRef.current.blur()}}});var _useLock=useLock(0),_useLock2=_slicedToArray(_useLock,2),getInputMouseDown=_useLock2[0],setInputMouseDown=_useLock2[1],pastedTextRef=useRef(null),triggerOnSearch=function triggerOnSearch(value){!1!==onSearch(value,!0,compositionStatusRef.current)&&onToggleOpen(!0)},sharedProps={inputRef:inputRef,onInputKeyDown:function onInternalInputKeyDown(event){var which=event.which;(which===KeyCode.UP||which===KeyCode.DOWN)&&event.preventDefault(),onInputKeyDown&&onInputKeyDown(event),which!==KeyCode.ENTER||"tags"!==mode||compositionStatusRef.current||open||onSearchSubmit(event.target.value),[KeyCode.SHIFT,KeyCode.TAB,KeyCode.BACKSPACE,KeyCode.ESC].includes(which)||onToggleOpen(!0)},onInputMouseDown:function onInternalInputMouseDown(){setInputMouseDown(!0)},onInputChange:function onInputChange(event){var value=event.target.value;if(tokenWithEnter&&pastedTextRef.current&&/[\r\n]/.test(pastedTextRef.current)){var replacedText=pastedTextRef.current.replace(/[\r\n]+$/,"").replace(/\r\n/g," ").replace(/[\r\n]/g," ");value=value.replace(replacedText,pastedTextRef.current)}pastedTextRef.current=null,triggerOnSearch(value)},onInputPaste:function onInputPaste(e){var clipboardData=e.clipboardData,value=clipboardData.getData("text");pastedTextRef.current=value},onInputCompositionStart:function onInputCompositionStart(){compositionStatusRef.current=!0},onInputCompositionEnd:function onInputCompositionEnd(e){compositionStatusRef.current=!1,triggerOnSearch(e.target.value)}},selectNode=multiple?React.createElement(MultipleSelector,Object.assign({},props,sharedProps)):React.createElement(SingleSelector,Object.assign({},props,sharedProps));return React.createElement("div",{ref:domRef,className:"".concat(prefixCls,"-selector"),onClick:function onClick(_ref){var target=_ref.target;if(target!==inputRef.current){var isIE=document.body.style.msTouchAction!==void 0;isIE?setTimeout(function(){inputRef.current.focus()}):inputRef.current.focus()}},onMouseDown:function onMouseDown(event){var inputMouseDown=getInputMouseDown();event.target===inputRef.current||inputMouseDown||event.preventDefault(),("combobox"===mode||showSearch&&inputMouseDown)&&open||(open&&onSearch("",!0,!1),onToggleOpen())}},selectNode)},ForwardSelector=React.forwardRef(Selector);ForwardSelector.displayName="Selector";export default ForwardSelector;