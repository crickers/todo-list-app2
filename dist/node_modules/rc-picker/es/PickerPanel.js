import"/node_modules/core-js/modules/es.string.includes.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _typeof from"/node_modules/@babel/runtime/helpers/esm/typeof.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import KeyCode from"/node_modules/rc-util/es/KeyCode.js";import warning from"/node_modules/rc-util/es/warning.js";import useMergedState from"/node_modules/rc-util/es/hooks/useMergedState.js";import TimePanel from"/node_modules/rc-picker/es/panels/TimePanel.js";import DatetimePanel from"/node_modules/rc-picker/es/panels/DatetimePanel.js";import DatePanel from"/node_modules/rc-picker/es/panels/DatePanel.js";import WeekPanel from"/node_modules/rc-picker/es/panels/WeekPanel.js";import MonthPanel from"/node_modules/rc-picker/es/panels/MonthPanel.js";import QuarterPanel from"/node_modules/rc-picker/es/panels/QuarterPanel.js";import YearPanel from"/node_modules/rc-picker/es/panels/YearPanel.js";import DecadePanel from"/node_modules/rc-picker/es/panels/DecadePanel.js";import{isEqual}from"/node_modules/rc-picker/es/utils/dateUtil.js";import PanelContext from"/node_modules/rc-picker/es/PanelContext.js";import{PickerModeMap}from"/node_modules/rc-picker/es/utils/uiUtil.js";import RangeContext from"/node_modules/rc-picker/es/RangeContext.js";import getExtraFooter from"/node_modules/rc-picker/es/utils/getExtraFooter.js";import getRanges from"/node_modules/rc-picker/es/utils/getRanges.js";import{getLowerBoundTime,setTime}from"/node_modules/rc-picker/es/utils/timeUtil.js";function PickerPanel(props){var _classNames,_props$prefixCls=props.prefixCls,prefixCls=void 0===_props$prefixCls?"rc-picker":_props$prefixCls,className=props.className,style=props.style,locale=props.locale,generateConfig=props.generateConfig,value=props.value,defaultValue=props.defaultValue,pickerValue=props.pickerValue,defaultPickerValue=props.defaultPickerValue,disabledDate=props.disabledDate,mode=props.mode,_props$picker=props.picker,picker=void 0===_props$picker?"date":_props$picker,_props$tabIndex=props.tabIndex,tabIndex=void 0===_props$tabIndex?0:_props$tabIndex,showNow=props.showNow,showTime=props.showTime,showToday=props.showToday,renderExtraFooter=props.renderExtraFooter,hideHeader=props.hideHeader,onSelect=props.onSelect,onChange=props.onChange,onPanelChange=props.onPanelChange,onMouseDown=props.onMouseDown,onPickerValueChange=props.onPickerValueChange,_onOk=props.onOk,components=props.components,direction=props.direction,_props$hourStep=props.hourStep,hourStep=void 0===_props$hourStep?1:_props$hourStep,_props$minuteStep=props.minuteStep,minuteStep=void 0===_props$minuteStep?1:_props$minuteStep,_props$secondStep=props.secondStep,secondStep=void 0===_props$secondStep?1:_props$secondStep,needConfirmButton="date"===picker&&!!showTime||"time"===picker,panelContext=React.useContext(PanelContext),operationRef=panelContext.operationRef,panelDivRef=panelContext.panelRef,onContextSelect=panelContext.onSelect,hideRanges=panelContext.hideRanges,defaultOpenValue=panelContext.defaultOpenValue,_React$useContext=React.useContext(RangeContext),inRange=_React$useContext.inRange,panelPosition=_React$useContext.panelPosition,rangedValue=_React$useContext.rangedValue,hoverRangedValue=_React$useContext.hoverRangedValue,panelRef=React.useRef({}),initRef=React.useRef(!0),_useMergedState=useMergedState(null,{value:value,defaultValue:defaultValue,postState:function postState(val){return!val&&defaultOpenValue&&"time"===picker?defaultOpenValue:val}}),_useMergedState2=_slicedToArray(_useMergedState,2),mergedValue=_useMergedState2[0],setInnerValue=_useMergedState2[1],_useMergedState3=useMergedState(null,{value:pickerValue,defaultValue:defaultPickerValue||mergedValue,postState:function postState(date){return date||generateConfig.getNow()}}),_useMergedState4=_slicedToArray(_useMergedState3,2),viewDate=_useMergedState4[0],setInnerViewDate=_useMergedState4[1],setViewDate=function setViewDate(date){setInnerViewDate(date),onPickerValueChange&&onPickerValueChange(date)},getInternalNextMode=function getInternalNextMode(nextMode){var getNextMode=PickerModeMap[picker];return getNextMode?getNextMode(nextMode):nextMode},_useMergedState5=useMergedState(function(){return"time"===picker?"time":getInternalNextMode("date")},{value:mode}),_useMergedState6=_slicedToArray(_useMergedState5,2),mergedMode=_useMergedState6[0],setInnerMode=_useMergedState6[1];React.useEffect(function(){setInnerMode(picker)},[picker]);var _React$useState=React.useState(function(){return mergedMode}),_React$useState2=_slicedToArray(_React$useState,2),sourceMode=_React$useState2[0],setSourceMode=_React$useState2[1],triggerSelect=function triggerSelect(date,type){var forceTriggerSelect=!!(2<arguments.length&&arguments[2]!==void 0)&&arguments[2];(mergedMode===picker||forceTriggerSelect)&&(setInnerValue(date),onSelect&&onSelect(date),onContextSelect&&onContextSelect(date,type),onChange&&!isEqual(generateConfig,date,mergedValue)&&(!(null!==disabledDate&&void 0!==disabledDate)||!disabledDate(date))&&onChange(date))},onInternalKeyDown=function onInternalKeyDown(e){return panelRef.current&&panelRef.current.onKeyDown?([KeyCode.LEFT,KeyCode.RIGHT,KeyCode.UP,KeyCode.DOWN,KeyCode.PAGE_UP,KeyCode.PAGE_DOWN,KeyCode.ENTER].includes(e.which)&&e.preventDefault(),panelRef.current.onKeyDown(e)):(warning(!1,"Panel not correct handle keyDown event. Please help to fire issue about this."),!1)};operationRef&&"right"!==panelPosition&&(operationRef.current={onKeyDown:onInternalKeyDown,onClose:function onClose(){panelRef.current&&panelRef.current.onClose&&panelRef.current.onClose()}}),React.useEffect(function(){value&&!initRef.current&&setInnerViewDate(value)},[value]),React.useEffect(function(){initRef.current=!1},[]);var panelNode,pickerProps=_objectSpread(_objectSpread({},props),{},{operationRef:panelRef,prefixCls:prefixCls,viewDate:viewDate,value:mergedValue,onViewDateChange:setViewDate,sourceMode:sourceMode,onPanelChange:function onInternalPanelChange(newMode,viewValue){var nextMode=getInternalNextMode(newMode||mergedMode);setSourceMode(mergedMode),setInnerMode(nextMode),onPanelChange&&(mergedMode!==nextMode||isEqual(generateConfig,viewDate,viewDate))&&onPanelChange(viewValue,nextMode)},disabledDate:disabledDate});delete pickerProps.onChange,delete pickerProps.onSelect;"decade"===mergedMode?panelNode=React.createElement(DecadePanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}})):"year"===mergedMode?panelNode=React.createElement(YearPanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}})):"month"===mergedMode?panelNode=React.createElement(MonthPanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}})):"quarter"===mergedMode?panelNode=React.createElement(QuarterPanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}})):"week"===mergedMode?panelNode=React.createElement(WeekPanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}})):"time"===mergedMode?(delete pickerProps.showTime,panelNode=React.createElement(TimePanel,_extends({},pickerProps,"object"===_typeof(showTime)?showTime:null,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}}))):panelNode=showTime?React.createElement(DatetimePanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}})):React.createElement(DatePanel,_extends({},pickerProps,{onSelect:function onSelect(date,type){setViewDate(date),triggerSelect(date,type)}}));var extraFooter,rangesNode,onNow=function onNow(){var now=generateConfig.getNow(),lowerBoundTime=getLowerBoundTime(generateConfig.getHour(now),generateConfig.getMinute(now),generateConfig.getSecond(now),0==24%hourStep?hourStep:1,0==60%minuteStep?minuteStep:1,0==60%secondStep?secondStep:1),adjustedNow=setTime(generateConfig,now,lowerBoundTime[0],lowerBoundTime[1],lowerBoundTime[2]);triggerSelect(adjustedNow,"submit")};hideRanges||(extraFooter=getExtraFooter(prefixCls,mergedMode,renderExtraFooter),rangesNode=getRanges({prefixCls:prefixCls,components:components,needConfirmButton:needConfirmButton,okDisabled:!mergedValue||disabledDate&&disabledDate(mergedValue),locale:locale,showNow:showNow,onNow:needConfirmButton&&onNow,onOk:function onOk(){mergedValue&&(triggerSelect(mergedValue,"submit",!0),_onOk&&_onOk(mergedValue))}}));var todayNode;if(showToday&&"date"===mergedMode&&"date"===picker&&!showTime){var now=generateConfig.getNow(),todayCls="".concat(prefixCls,"-today-btn"),disabled=disabledDate&&disabledDate(now);todayNode=React.createElement("a",{className:classNames(todayCls,disabled&&"".concat(todayCls,"-disabled")),"aria-disabled":disabled,onClick:function onClick(){disabled||triggerSelect(now,"mouse",!0)}},locale.today)}return React.createElement(PanelContext.Provider,{value:_objectSpread(_objectSpread({},panelContext),{},{mode:mergedMode,hideHeader:"hideHeader"in props?hideHeader:panelContext.hideHeader,hidePrevBtn:inRange&&"right"===panelPosition,hideNextBtn:inRange&&"left"===panelPosition})},React.createElement("div",{tabIndex:tabIndex,className:classNames("".concat(prefixCls,"-panel"),className,(_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-panel-has-range"),rangedValue&&rangedValue[0]&&rangedValue[1]),_defineProperty(_classNames,"".concat(prefixCls,"-panel-has-range-hover"),hoverRangedValue&&hoverRangedValue[0]&&hoverRangedValue[1]),_defineProperty(_classNames,"".concat(prefixCls,"-panel-rtl"),"rtl"===direction),_classNames)),style:style,onKeyDown:onInternalKeyDown,onBlur:function onInternalBlur(e){panelRef.current&&panelRef.current.onBlur&&panelRef.current.onBlur(e)},onMouseDown:onMouseDown,ref:panelDivRef},panelNode,extraFooter||rangesNode||todayNode?React.createElement("div",{className:"".concat(prefixCls,"-footer")},extraFooter,rangesNode,todayNode):null))}export default PickerPanel;