import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.string.includes.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _typeof from"/node_modules/@babel/runtime/helpers/esm/typeof.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import KeyCode from"/node_modules/rc-util/es/KeyCode.js";import DatePanel from"/node_modules/rc-picker/es/panels/DatePanel.js";import TimePanel from"/node_modules/rc-picker/es/panels/TimePanel.js";import{tuple}from"/node_modules/rc-picker/es/utils/miscUtil.js";function setTime(generateConfig,date,defaultDate){if(!defaultDate)return date;var newDate=date;return newDate=generateConfig.setHour(newDate,generateConfig.getHour(defaultDate)),newDate=generateConfig.setMinute(newDate,generateConfig.getMinute(defaultDate)),newDate=generateConfig.setSecond(newDate,generateConfig.getSecond(defaultDate)),newDate}var ACTIVE_PANEL=tuple("date","time");function DatetimePanel(props){function getNextActive(offset){var activeIndex=ACTIVE_PANEL.indexOf(activePanel)+offset,nextActivePanel=ACTIVE_PANEL[activeIndex]||null;return nextActivePanel}var prefixCls=props.prefixCls,operationRef=props.operationRef,generateConfig=props.generateConfig,value=props.value,defaultValue=props.defaultValue,disabledTime=props.disabledTime,showTime=props.showTime,onSelect=props.onSelect,panelPrefixCls="".concat(prefixCls,"-datetime-panel"),_React$useState=React.useState(null),_React$useState2=_slicedToArray(_React$useState,2),activePanel=_React$useState2[0],setActivePanel=_React$useState2[1],dateOperationRef=React.useRef({}),timeOperationRef=React.useRef({}),timeProps="object"===_typeof(showTime)?_objectSpread({},showTime):{},onBlur=function onBlur(e){timeOperationRef.current.onBlur&&timeOperationRef.current.onBlur(e),setActivePanel(null)};operationRef.current={onKeyDown:function onKeyDown(event){if(event.which===KeyCode.TAB){var nextActivePanel=getNextActive(event.shiftKey?-1:1);return setActivePanel(nextActivePanel),nextActivePanel&&event.preventDefault(),!0}if(activePanel){var ref="date"===activePanel?dateOperationRef:timeOperationRef;return ref.current&&ref.current.onKeyDown&&ref.current.onKeyDown(event),!0}return!![KeyCode.LEFT,KeyCode.RIGHT,KeyCode.UP,KeyCode.DOWN].includes(event.which)&&(setActivePanel("date"),!0)},onBlur:onBlur,onClose:onBlur};var onInternalSelect=function onInternalSelect(date,source){var selectedDate=date;"date"===source&&!value&&timeProps.defaultValue?(selectedDate=generateConfig.setHour(selectedDate,generateConfig.getHour(timeProps.defaultValue)),selectedDate=generateConfig.setMinute(selectedDate,generateConfig.getMinute(timeProps.defaultValue)),selectedDate=generateConfig.setSecond(selectedDate,generateConfig.getSecond(timeProps.defaultValue))):"time"==source&&!value&&defaultValue&&(selectedDate=generateConfig.setYear(selectedDate,generateConfig.getYear(defaultValue)),selectedDate=generateConfig.setMonth(selectedDate,generateConfig.getMonth(defaultValue)),selectedDate=generateConfig.setDate(selectedDate,generateConfig.getDate(defaultValue))),onSelect&&onSelect(selectedDate,"mouse")},disabledTimes=disabledTime?disabledTime(value||null):{};return React.createElement("div",{className:classNames(panelPrefixCls,_defineProperty({},"".concat(panelPrefixCls,"-active"),activePanel))},React.createElement(DatePanel,_extends({},props,{operationRef:dateOperationRef,active:"date"===activePanel,onSelect:function onSelect(date){onInternalSelect(setTime(generateConfig,date,showTime&&"object"===_typeof(showTime)?showTime.defaultValue:null),"date")}})),React.createElement(TimePanel,_extends({},props,{format:void 0},timeProps,disabledTimes,{defaultValue:void 0,operationRef:timeOperationRef,active:"time"===activePanel,onSelect:function onSelect(date){onInternalSelect(date,"time")}})))}export default DatetimePanel;