import"/node_modules/core-js/modules/es.array.index-of.js";import _regeneratorRuntime from"c:\\node_modules\\@babel\\runtime\\regenerator\\index.js";import _asyncToGenerator from"/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import{useState,useEffect,useRef}from"c:\\node_modules\\react\\index.js";import raf from"/node_modules/rc-util/es/raf.js";var StatusQueue=["measure","align",null,"motion"];export default(function(visible,doMeasure){function cancelRaf(){raf.cancel(rafRef.current)}var _useState=useState(null),_useState2=_slicedToArray(_useState,2),status=_useState2[0],setStatus=_useState2[1],rafRef=useRef();return useEffect(function(){setStatus("measure")},[visible]),useEffect(function(){"measure"===status?doMeasure():void 0,status&&(rafRef.current=raf(_asyncToGenerator(_regeneratorRuntime.mark(function _callee(){var index,nextStatus;return _regeneratorRuntime.wrap(function _callee$(_context){for(;1;)switch(_context.prev=_context.next){case 0:index=StatusQueue.indexOf(status),nextStatus=StatusQueue[index+1],nextStatus&&-1!==index&&setStatus(nextStatus);case 3:case"end":return _context.stop();}},_callee)}))))},[status]),useEffect(function(){return function(){cancelRaf()}},[]),[status,function goNextStatus(callback){cancelRaf(),rafRef.current=raf(function(){setStatus(function(prev){return"align"===status?"motion":"motion"===status?"stable":prev}),null===callback||void 0===callback?void 0:callback()})}]});