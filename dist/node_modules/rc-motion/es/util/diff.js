import"/node_modules/core-js/modules/es.array.slice.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _typeof from"/node_modules/@babel/runtime/helpers/esm/typeof.js";export var STATUS_ADD="add";export var STATUS_KEEP="keep";export var STATUS_REMOVE="remove";export var STATUS_REMOVED="removed";export function wrapKeyToObject(key){var keyObj;return keyObj=key&&"object"===_typeof(key)&&"key"in key?key:{key:key},_objectSpread(_objectSpread({},keyObj),{},{key:keyObj.key+""})}export function parseKeys(){var keys=0<arguments.length&&arguments[0]!==void 0?arguments[0]:[];return keys.map(wrapKeyToObject)}export function diffKeys(){var prevKeys=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[],currentKeys=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[],list=[],currentIndex=0,currentLen=currentKeys.length,prevKeyObjects=parseKeys(prevKeys),currentKeyObjects=parseKeys(currentKeys);prevKeyObjects.forEach(function(keyObj){for(var currentKeyObj,hit=!1,i=currentIndex;i<currentLen;i+=1)if(currentKeyObj=currentKeyObjects[i],currentKeyObj.key===keyObj.key){currentIndex<i&&(list=list.concat(currentKeyObjects.slice(currentIndex,i).map(function(obj){return _objectSpread(_objectSpread({},obj),{},{status:STATUS_ADD})})),currentIndex=i),list.push(_objectSpread(_objectSpread({},currentKeyObj),{},{status:STATUS_KEEP})),currentIndex+=1,hit=!0;break}hit||list.push(_objectSpread(_objectSpread({},keyObj),{},{status:STATUS_REMOVE}))}),currentIndex<currentLen&&(list=list.concat(currentKeyObjects.slice(currentIndex).map(function(obj){return _objectSpread(_objectSpread({},obj),{},{status:STATUS_ADD})})));var keys={};list.forEach(function(_ref){var key=_ref.key;keys[key]=(keys[key]||0)+1});var duplicatedKeys=Object.keys(keys).filter(function(key){return 1<keys[key]});return duplicatedKeys.forEach(function(matchKey){list=list.filter(function(_ref2){var key=_ref2.key,status=_ref2.status;return key!==matchKey||status!==STATUS_REMOVE}),list.forEach(function(node){node.key===matchKey&&(node.status=STATUS_KEEP)})}),list}