import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.promise.js";import _slicedToArray from"/node_modules/@babel/runtime/helpers/esm/slicedToArray.js";import React from"c:\\node_modules\\react\\index.js";import{STEP_PREPARE,STEP_ACTIVE,STEP_START,STEP_ACTIVATED,STEP_NONE}from"/node_modules/rc-motion/es/interface.js";import useIsomorphicLayoutEffect from"/node_modules/rc-motion/es/hooks/useIsomorphicLayoutEffect.js";import useNextFrame from"/node_modules/rc-motion/es/hooks/useNextFrame.js";var STEP_QUEUE=[STEP_PREPARE,STEP_START,STEP_ACTIVE,STEP_ACTIVATED];export var SkipStep=!1;export var DoStep=!0;export function isActive(step){return step===STEP_ACTIVE||step===STEP_ACTIVATED}export default(function(status,callback){var _React$useState=React.useState(STEP_NONE),_React$useState2=_slicedToArray(_React$useState,2),step=_React$useState2[0],setStep=_React$useState2[1],_useNextFrame=useNextFrame(),_useNextFrame2=_slicedToArray(_useNextFrame,2),nextFrame=_useNextFrame2[0],cancelNextFrame=_useNextFrame2[1];return useIsomorphicLayoutEffect(function(){if(step!==STEP_NONE&&step!==STEP_ACTIVATED){var index=STEP_QUEUE.indexOf(step),nextStep=STEP_QUEUE[index+1],result=callback(step);result===SkipStep?setStep(nextStep):nextFrame(function(info){function doNext(){info.isCanceled()||setStep(nextStep)}!0===result?doNext():Promise.resolve(result).then(doNext)})}},[status,step]),React.useEffect(function(){return function(){cancelNextFrame()}},[]),[function startQueue(){setStep(STEP_PREPARE)},step]});