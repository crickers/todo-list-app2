import"/node_modules/core-js/modules/es.array.iterator.js";import"/node_modules/core-js/modules/es.object.assign.js";import"/node_modules/core-js/modules/web.dom-collections.iterator.js";import _objectWithoutProperties from"/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import OriginCSSMotion from"/node_modules/rc-motion/es/CSSMotion.js";import{supportTransition}from"/node_modules/rc-motion/es/util/motion.js";import{STATUS_ADD,STATUS_KEEP,STATUS_REMOVE,STATUS_REMOVED,diffKeys,parseKeys}from"/node_modules/rc-motion/es/util/diff.js";var MOTION_PROP_NAMES=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];export function genCSSMotionList(transitionSupport){var CSSMotion=1<arguments.length&&void 0!==arguments[1]?arguments[1]:OriginCSSMotion,CSSMotionList=function(_React$Component){function CSSMotionList(){var _this;return _classCallCheck(this,CSSMotionList),_this=_super.apply(this,arguments),_this.state={keyEntities:[]},_this.removeKey=function(removeKey){_this.setState(function(_ref){var keyEntities=_ref.keyEntities;return{keyEntities:keyEntities.map(function(entity){return entity.key===removeKey?_objectSpread(_objectSpread({},entity),{},{status:STATUS_REMOVED}):entity})}})},_this}_inherits(CSSMotionList,_React$Component);var _super=_createSuper(CSSMotionList);return _createClass(CSSMotionList,[{key:"render",value:function render(){var _this2=this,keyEntities=this.state.keyEntities,_this$props=this.props,component=_this$props.component,children=_this$props.children,_onVisibleChanged=_this$props.onVisibleChanged,restProps=_objectWithoutProperties(_this$props,["component","children","onVisibleChanged"]),Component=component||React.Fragment,motionProps={};return MOTION_PROP_NAMES.forEach(function(prop){motionProps[prop]=restProps[prop],delete restProps[prop]}),delete restProps.keys,React.createElement(Component,Object.assign({},restProps),keyEntities.map(function(_ref2){var status=_ref2.status,eventProps=_objectWithoutProperties(_ref2,["status"]);return React.createElement(CSSMotion,Object.assign({},motionProps,{key:eventProps.key,visible:status===STATUS_ADD||status===STATUS_KEEP,eventProps:eventProps,onVisibleChanged:function onVisibleChanged(changedVisible){null===_onVisibleChanged||void 0===_onVisibleChanged?void 0:_onVisibleChanged(changedVisible,{key:eventProps.key}),changedVisible||_this2.removeKey(eventProps.key)}}),children)}))}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(_ref3,_ref4){var keys=_ref3.keys,keyEntities=_ref4.keyEntities,parsedKeyObjects=parseKeys(keys),mixedKeyEntities=diffKeys(keyEntities,parsedKeyObjects);return{keyEntities:mixedKeyEntities.filter(function(entity){var prevEntity=keyEntities.find(function(_ref5){var key=_ref5.key;return entity.key===key});return!(prevEntity&&prevEntity.status===STATUS_REMOVED&&entity.status===STATUS_REMOVE)})}}}]),CSSMotionList}(React.Component);return CSSMotionList.defaultProps={component:"div"},CSSMotionList}export default genCSSMotionList(supportTransition);