import"/node_modules/core-js/modules/es.array.index-of.js";import"/node_modules/core-js/modules/es.array.reverse.js";import"/node_modules/core-js/modules/es.array.slice.js";import"/node_modules/core-js/modules/es.array.sort.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _toConsumableArray from"/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import classNames from"/node_modules/classnames.js";import Track from"/node_modules/rc-slider/es/common/Track.js";import createSlider from"/node_modules/rc-slider/es/common/createSlider.js";import*as _ref2 from"/node_modules/rc-slider/es/utils.js";const utils=1===Object.keys(_ref2).length&&_ref2.default?_ref2.default:_ref2;var _trimAlignValue=function trimAlignValue(_ref){var value=_ref.value,handle=_ref.handle,bounds=_ref.bounds,props=_ref.props,allowCross=props.allowCross,pushable=props.pushable,thershold=+pushable,valInRange=utils.ensureValueInRange(value,props),valNotConflict=valInRange;return allowCross||null==handle||void 0===bounds||(0<handle&&valInRange<=bounds[handle-1]+thershold&&(valNotConflict=bounds[handle-1]+thershold),handle<bounds.length-1&&valInRange>=bounds[handle+1]-thershold&&(valNotConflict=bounds[handle+1]-thershold)),utils.ensureValuePrecision(valNotConflict,props)},Range=function(_React$Component){function Range(props){var _this;_classCallCheck(this,Range),_this=_super.call(this,props),_this.positionGetValue=function(position){var bounds=_this.getValue(),value=_this.calcValueByPos(position),closestBound=_this.getClosestBound(value),index=_this.getBoundNeedMoving(value,closestBound),prevValue=bounds[index];if(value===prevValue)return null;var nextBounds=_toConsumableArray(bounds);return nextBounds[index]=value,nextBounds},_this.onEnd=function(force){var handle=_this.state.handle;_this.removeDocumentEvents(),handle||(_this.dragTrack=!1),(null!==handle||force)&&_this.props.onAfterChange(_this.getValue()),_this.setState({handle:null})};var count=props.count,min=props.min,max=props.max,initialValue=Array.apply(void 0,_toConsumableArray(Array(count+1))).map(function(){return min}),defaultValue="defaultValue"in props?props.defaultValue:initialValue,value=void 0===props.value?defaultValue:props.value,bounds=value.map(function(v,i){return _trimAlignValue({value:v,handle:i,props:props})}),recent=bounds[0]===max?0:bounds.length-1;return _this.state={handle:null,recent:recent,bounds:bounds},_this}_inherits(Range,_React$Component);var _super=_createSuper(Range);return _createClass(Range,[{key:"calcValueByPos",value:function calcValueByPos(value){return 0}},{key:"getSliderLength",value:function getSliderLength(){return 0}},{key:"calcOffset",value:function calcOffset(value){return 0}},{key:"saveHandle",value:function saveHandle(index,h){}},{key:"removeDocumentEvents",value:function removeDocumentEvents(){}},{key:"componentDidUpdate",value:function componentDidUpdate(prevProps,prevState){var _this2=this,_this$props=this.props,onChange=_this$props.onChange,value=_this$props.value,min=_this$props.min,max=_this$props.max;if(("min"in this.props||"max"in this.props)&&(min!==prevProps.min||max!==prevProps.max)){var currentValue=value||prevState.bounds;if(currentValue.some(function(v){return utils.isValueOutOfRange(v,_this2.props)})){var newValues=currentValue.map(function(v){return utils.ensureValueInRange(v,_this2.props)});onChange(newValues)}}}},{key:"onChange",value:function onChange(state){var props=this.props,isNotControlled=!("value"in props);if(isNotControlled)this.setState(state);else{var controlledState={};["handle","recent"].forEach(function(item){void 0!==state[item]&&(controlledState[item]=state[item])}),Object.keys(controlledState).length&&this.setState(controlledState)}var data=_objectSpread(_objectSpread({},this.state),state),changedValue=data.bounds;props.onChange(changedValue)}},{key:"onStart",value:function onStart(position){var props=this.props,state=this.state,bounds=this.getValue();props.onBeforeChange(bounds);var value=this.calcValueByPos(position);this.startValue=value,this.startPosition=position;var closestBound=this.getClosestBound(value);this.prevMovedHandleIndex=this.getBoundNeedMoving(value,closestBound),this.setState({handle:this.prevMovedHandleIndex,recent:this.prevMovedHandleIndex});var prevValue=bounds[this.prevMovedHandleIndex];if(value!==prevValue){var nextBounds=_toConsumableArray(state.bounds);nextBounds[this.prevMovedHandleIndex]=value,this.onChange({bounds:nextBounds})}}},{key:"onMove",value:function onMove(e,position,dragTrack,startBounds){utils.pauseEvent(e);var state=this.state,props=this.props,maxValue=props.max||100,minValue=props.min||0;if(dragTrack){var pos=props.vertical?-position:position;pos=props.reverse?-pos:pos;var max=maxValue-Math.max.apply(Math,_toConsumableArray(startBounds)),min=minValue-Math.min.apply(Math,_toConsumableArray(startBounds)),ratio=Math.min(Math.max(pos/(this.getSliderLength()/100),min),max),nextBounds=startBounds.map(function(v){return Math.floor(Math.max(Math.min(v+ratio,maxValue),minValue))});return void(state.bounds.map(function(c,i){return c===nextBounds[i]}).some(function(c){return!c})&&this.onChange({bounds:nextBounds}))}var value=this.calcValueByPos(position),oldValue=state.bounds[state.handle];value===oldValue||this.moveTo(value)}},{key:"onKeyboard",value:function onKeyboard(e){var _this$props2=this.props,reverse=_this$props2.reverse,vertical=_this$props2.vertical,valueMutator=utils.getKeyboardValueMutator(e,vertical,reverse);if(valueMutator){utils.pauseEvent(e);var state=this.state,props=this.props,bounds=state.bounds,handle=state.handle,oldValue=bounds[null===handle?state.recent:handle],mutatedValue=valueMutator(oldValue,props),value=_trimAlignValue({value:mutatedValue,handle:handle,bounds:state.bounds,props:props});if(value===oldValue)return;this.moveTo(value,!0)}}},{key:"getValue",value:function getValue(){return this.state.bounds}},{key:"getClosestBound",value:function getClosestBound(value){for(var bounds=this.state.bounds,closestBound=0,i=1;i<bounds.length-1;i+=1)value>=bounds[i]&&(closestBound=i);return Math.abs(bounds[closestBound+1]-value)<Math.abs(bounds[closestBound]-value)&&(closestBound+=1),closestBound}},{key:"getBoundNeedMoving",value:function getBoundNeedMoving(value,closestBound){var _this$state=this.state,bounds=_this$state.bounds,recent=_this$state.recent,boundNeedMoving=closestBound,isAtTheSamePoint=bounds[closestBound+1]===bounds[closestBound];return isAtTheSamePoint&&bounds[recent]===bounds[closestBound]&&(boundNeedMoving=recent),isAtTheSamePoint&&value!==bounds[closestBound+1]&&(boundNeedMoving=value<bounds[closestBound+1]?closestBound:closestBound+1),boundNeedMoving}},{key:"getLowerBound",value:function getLowerBound(){return this.state.bounds[0]}},{key:"getUpperBound",value:function getUpperBound(){var bounds=this.state.bounds;return bounds[bounds.length-1]}},{key:"getPoints",value:function getPoints(){var _this$props3=this.props,marks=_this$props3.marks,step=_this$props3.step,min=_this$props3.min,max=_this$props3.max,cache=this.internalPointsCache;if(!cache||cache.marks!==marks||cache.step!==step){var pointsObject=_objectSpread({},marks);if(null!==step)for(var point=min;point<=max;point+=step)pointsObject[point]=point;var points=Object.keys(pointsObject).map(parseFloat);points.sort(function(a,b){return a-b}),this.internalPointsCache={marks:marks,step:step,points:points}}return this.internalPointsCache.points}},{key:"moveTo",value:function moveTo(value,isFromKeyboardEvent){var _this3=this,state=this.state,props=this.props,nextBounds=_toConsumableArray(state.bounds),handle=null===state.handle?state.recent:state.handle;nextBounds[handle]=value;var nextHandle=handle;!1===props.pushable?props.allowCross&&(nextBounds.sort(function(a,b){return a-b}),nextHandle=nextBounds.indexOf(value)):this.pushSurroundingHandles(nextBounds,nextHandle),this.onChange({recent:nextHandle,handle:nextHandle,bounds:nextBounds}),isFromKeyboardEvent&&(this.props.onAfterChange(nextBounds),this.setState({},function(){_this3.handlesRefs[nextHandle].focus()}),this.onEnd())}},{key:"pushSurroundingHandles",value:function pushSurroundingHandles(bounds,handle){var value=bounds[handle],pushable=this.props.pushable,threshold=+pushable,direction=0;if(bounds[handle+1]-value<threshold&&(direction=+1),value-bounds[handle-1]<threshold&&(direction=-1),0!==direction){var nextHandle=handle+direction,diffToNext=direction*(bounds[nextHandle]-value);this.pushHandle(bounds,nextHandle,direction,threshold-diffToNext)||(bounds[handle]=bounds[nextHandle]-direction*threshold)}}},{key:"pushHandle",value:function pushHandle(bounds,handle,direction,amount){for(var originalValue=bounds[handle],currentValue=bounds[handle];direction*(currentValue-originalValue)<amount;){if(!this.pushHandleOnePoint(bounds,handle,direction))return bounds[handle]=originalValue,!1;currentValue=bounds[handle]}return!0}},{key:"pushHandleOnePoint",value:function pushHandleOnePoint(bounds,handle,direction){var points=this.getPoints(),pointIndex=points.indexOf(bounds[handle]),nextPointIndex=pointIndex+direction;if(nextPointIndex>=points.length||0>nextPointIndex)return!1;var nextHandle=handle+direction,nextValue=points[nextPointIndex],pushable=this.props.pushable,threshold=+pushable,diffToNext=direction*(bounds[nextHandle]-nextValue);return!!this.pushHandle(bounds,nextHandle,direction,threshold-diffToNext)&&(bounds[handle]=nextValue,!0)}},{key:"trimAlignValue",value:function trimAlignValue(value){var _this$state2=this.state,handle=_this$state2.handle,bounds=_this$state2.bounds;return _trimAlignValue({value:value,handle:handle,bounds:bounds,props:this.props})}},{key:"render",value:function render(){var _this4=this,_this$state3=this.state,handle=_this$state3.handle,bounds=_this$state3.bounds,_this$props4=this.props,prefixCls=_this$props4.prefixCls,vertical=_this$props4.vertical,included=_this$props4.included,disabled=_this$props4.disabled,min=_this$props4.min,max=_this$props4.max,reverse=_this$props4.reverse,handleGenerator=_this$props4.handle,trackStyle=_this$props4.trackStyle,handleStyle=_this$props4.handleStyle,tabIndex=_this$props4.tabIndex,ariaLabelGroupForHandles=_this$props4.ariaLabelGroupForHandles,ariaLabelledByGroupForHandles=_this$props4.ariaLabelledByGroupForHandles,ariaValueTextFormatterGroupForHandles=_this$props4.ariaValueTextFormatterGroupForHandles,offsets=bounds.map(function(v){return _this4.calcOffset(v)}),handleClassName="".concat(prefixCls,"-handle"),handles=bounds.map(function(v,i){var _classNames,mergedTabIndex=tabIndex[i]||0;(disabled||null===tabIndex[i])&&(mergedTabIndex=null);var dragging=handle===i;return handleGenerator({className:classNames((_classNames={},_defineProperty(_classNames,handleClassName,!0),_defineProperty(_classNames,"".concat(handleClassName,"-").concat(i+1),!0),_defineProperty(_classNames,"".concat(handleClassName,"-dragging"),dragging),_classNames)),prefixCls:prefixCls,vertical:vertical,dragging:dragging,offset:offsets[i],value:v,index:i,tabIndex:mergedTabIndex,min:min,max:max,reverse:reverse,disabled:disabled,style:handleStyle[i],ref:function ref(h){return _this4.saveHandle(i,h)},ariaLabel:ariaLabelGroupForHandles[i],ariaLabelledBy:ariaLabelledByGroupForHandles[i],ariaValueTextFormatter:ariaValueTextFormatterGroupForHandles[i]})}),tracks=bounds.slice(0,-1).map(function(_,index){var _classNames2,i=index+1,trackClassName=classNames((_classNames2={},_defineProperty(_classNames2,"".concat(prefixCls,"-track"),!0),_defineProperty(_classNames2,"".concat(prefixCls,"-track-").concat(i),!0),_classNames2));return React.createElement(Track,{className:trackClassName,vertical:vertical,reverse:reverse,included:included,offset:offsets[i-1],length:offsets[i]-offsets[i-1],style:trackStyle[index],key:i})});return{tracks:tracks,handles:handles}}}],[{key:"getDerivedStateFromProps",value:function getDerivedStateFromProps(props,state){if(!("value"in props||"min"in props||"max"in props))return null;var value=props.value||state.bounds,nextBounds=value.map(function(v,i){return _trimAlignValue({value:v,handle:i,bounds:state.bounds,props:props})});if(state.bounds.length!==nextBounds.length)nextBounds=value.map(function(v,i){return _trimAlignValue({value:v,handle:i,props:props})});else if(nextBounds.every(function(v,i){return v===state.bounds[i]}))return null;return _objectSpread(_objectSpread({},state),{},{bounds:nextBounds})}}]),Range}(React.Component);Range.displayName="Range",Range.defaultProps={count:1,allowCross:!0,pushable:!1,draggableTrack:!1,tabIndex:[],ariaLabelGroupForHandles:[],ariaLabelledByGroupForHandles:[],ariaValueTextFormatterGroupForHandles:[]};export default createSlider(Range);