import"/node_modules/core-js/modules/es.array.reverse.js";import _extends from"/node_modules/@babel/runtime/helpers/esm/extends.js";import _objectWithoutProperties from"/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js";import _objectSpread from"/node_modules/@babel/runtime/helpers/esm/objectSpread2.js";import _defineProperty from"/node_modules/@babel/runtime/helpers/esm/defineProperty.js";import _toConsumableArray from"/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js";import _classCallCheck from"/node_modules/@babel/runtime/helpers/esm/classCallCheck.js";import _createClass from"/node_modules/@babel/runtime/helpers/esm/createClass.js";import _get from"/node_modules/@babel/runtime/helpers/esm/get.js";import _getPrototypeOf from"/node_modules/@babel/runtime/helpers/esm/getPrototypeOf.js";import _inherits from"/node_modules/@babel/runtime/helpers/esm/inherits.js";import _createSuper from"/node_modules/@babel/runtime/helpers/esm/createSuper.js";import React from"c:\\node_modules\\react\\index.js";import addEventListener from"/node_modules/rc-util/es/Dom/addEventListener.js";import classNames from"/node_modules/classnames.js";import warning from"/node_modules/rc-util/es/warning.js";import Steps from"/node_modules/rc-slider/es/common/Steps.js";import Marks from"/node_modules/rc-slider/es/common/Marks.js";import Handle from"/node_modules/rc-slider/es/Handle.js";import*as _ref from"/node_modules/rc-slider/es/utils.js";const utils=1===Object.keys(_ref).length&&_ref.default?_ref.default:_ref;function noop(){}export default function createSlider(Component){var _a;return _a=function(_Component){function ComponentEnhancer(props){var _this;_classCallCheck(this,ComponentEnhancer),_this=_super.call(this,props),_this.onDown=function(e,position){var p=position,_this$props=_this.props,draggableTrack=_this$props.draggableTrack,isVertical=_this$props.vertical,bounds=_this.state.bounds,value=draggableTrack&&_this.positionGetValue?_this.positionGetValue(p)||[]:[],inPoint=utils.isEventFromHandle(e,_this.handlesRefs);if(_this.dragTrack=draggableTrack&&2<=bounds.length&&!inPoint&&!value.map(function(n,i){var v=!!i||n>=bounds[i];return i===value.length-1?n<=bounds[i]:v}).some(function(c){return!c}),_this.dragTrack)_this.dragOffset=p,_this.startBounds=_toConsumableArray(bounds);else{if(!inPoint)_this.dragOffset=0;else{var handlePosition=utils.getHandleCenterPosition(isVertical,e.target);_this.dragOffset=p-handlePosition,p=handlePosition}_this.onStart(p)}},_this.onMouseDown=function(e){if(0===e.button){_this.removeDocumentEvents();var isVertical=_this.props.vertical,position=utils.getMousePosition(isVertical,e);_this.onDown(e,position),_this.addDocumentMouseEvents()}},_this.onTouchStart=function(e){if(!utils.isNotTouchEvent(e)){var isVertical=_this.props.vertical,position=utils.getTouchPosition(isVertical,e);_this.onDown(e,position),_this.addDocumentTouchEvents(),utils.pauseEvent(e)}},_this.onFocus=function(e){var _this$props2=_this.props,onFocus=_this$props2.onFocus,vertical=_this$props2.vertical;if(utils.isEventFromHandle(e,_this.handlesRefs)&&!_this.dragTrack){var handlePosition=utils.getHandleCenterPosition(vertical,e.target);_this.dragOffset=0,_this.onStart(handlePosition),utils.pauseEvent(e),onFocus&&onFocus(e)}},_this.onBlur=function(e){var onBlur=_this.props.onBlur;_this.dragTrack||_this.onEnd(),onBlur&&onBlur(e)},_this.onMouseUp=function(){_this.handlesRefs[_this.prevMovedHandleIndex]&&_this.handlesRefs[_this.prevMovedHandleIndex].clickFocus()},_this.onMouseMove=function(e){if(!_this.sliderRef)return void _this.onEnd();var position=utils.getMousePosition(_this.props.vertical,e);_this.onMove(e,position-_this.dragOffset,_this.dragTrack,_this.startBounds)},_this.onTouchMove=function(e){if(utils.isNotTouchEvent(e)||!_this.sliderRef)return void _this.onEnd();var position=utils.getTouchPosition(_this.props.vertical,e);_this.onMove(e,position-_this.dragOffset,_this.dragTrack,_this.startBounds)},_this.onKeyDown=function(e){_this.sliderRef&&utils.isEventFromHandle(e,_this.handlesRefs)&&_this.onKeyboard(e)},_this.onClickMarkLabel=function(e,value){e.stopPropagation(),_this.onChange({value:value}),_this.setState({value:value},function(){return _this.onEnd(!0)})},_this.saveSlider=function(slider){_this.sliderRef=slider};var step=props.step,max=props.max,min=props.min,isPointDiffEven=!isFinite(max-min)||0==(max-min)%step;return warning(!(step&&Math.floor(step)===step)||isPointDiffEven,"Slider[max] - Slider[min] (".concat(max-min,") should be a multiple of Slider[step] (").concat(step,")")),_this.handlesRefs={},_this}_inherits(ComponentEnhancer,_Component);var _super=_createSuper(ComponentEnhancer);return _createClass(ComponentEnhancer,[{key:"componentDidMount",value:function componentDidMount(){this.document=this.sliderRef&&this.sliderRef.ownerDocument;var _this$props3=this.props,autoFocus=_this$props3.autoFocus,disabled=_this$props3.disabled;autoFocus&&!disabled&&this.focus()}},{key:"componentWillUnmount",value:function componentWillUnmount(){_get(_getPrototypeOf(ComponentEnhancer.prototype),"componentWillUnmount",this)&&_get(_getPrototypeOf(ComponentEnhancer.prototype),"componentWillUnmount",this).call(this),this.removeDocumentEvents()}},{key:"getSliderStart",value:function getSliderStart(){var slider=this.sliderRef,_this$props4=this.props,vertical=_this$props4.vertical,reverse=_this$props4.reverse,rect=slider.getBoundingClientRect();return vertical?reverse?rect.bottom:rect.top:window.pageXOffset+(reverse?rect.right:rect.left)}},{key:"getSliderLength",value:function getSliderLength(){var slider=this.sliderRef;if(!slider)return 0;var coords=slider.getBoundingClientRect();return this.props.vertical?coords.height:coords.width}},{key:"addDocumentTouchEvents",value:function addDocumentTouchEvents(){this.onTouchMoveListener=addEventListener(this.document,"touchmove",this.onTouchMove),this.onTouchUpListener=addEventListener(this.document,"touchend",this.onEnd)}},{key:"addDocumentMouseEvents",value:function addDocumentMouseEvents(){this.onMouseMoveListener=addEventListener(this.document,"mousemove",this.onMouseMove),this.onMouseUpListener=addEventListener(this.document,"mouseup",this.onEnd)}},{key:"removeDocumentEvents",value:function removeDocumentEvents(){this.onTouchMoveListener&&this.onTouchMoveListener.remove(),this.onTouchUpListener&&this.onTouchUpListener.remove(),this.onMouseMoveListener&&this.onMouseMoveListener.remove(),this.onMouseUpListener&&this.onMouseUpListener.remove()}},{key:"focus",value:function focus(){var _this$handlesRefs$;this.props.disabled||(null===(_this$handlesRefs$=this.handlesRefs[0])||void 0===_this$handlesRefs$?void 0:_this$handlesRefs$.focus())}},{key:"blur",value:function blur(){var _this2=this;this.props.disabled||Object.keys(this.handlesRefs).forEach(function(key){var _this2$handlesRefs$ke,_this2$handlesRefs$ke2;null===(_this2$handlesRefs$ke=_this2.handlesRefs[key])||void 0===_this2$handlesRefs$ke||null===(_this2$handlesRefs$ke2=_this2$handlesRefs$ke.blur)||void 0===_this2$handlesRefs$ke2?void 0:_this2$handlesRefs$ke2.call(_this2$handlesRefs$ke)})}},{key:"calcValue",value:function calcValue(offset){var _this$props5=this.props,vertical=_this$props5.vertical,min=_this$props5.min,max=_this$props5.max,ratio=Math.abs(Math.max(offset,0)/this.getSliderLength()),value=vertical?(1-ratio)*(max-min)+min:ratio*(max-min)+min;return value}},{key:"calcValueByPos",value:function calcValueByPos(position){var sign=this.props.reverse?-1:+1,pixelOffset=sign*(position-this.getSliderStart()),nextValue=this.trimAlignValue(this.calcValue(pixelOffset));return nextValue}},{key:"calcOffset",value:function calcOffset(value){var _this$props6=this.props,min=_this$props6.min,max=_this$props6.max;return Math.max(0,100*((value-min)/(max-min)))}},{key:"saveHandle",value:function saveHandle(index,handle){this.handlesRefs[index]=handle}},{key:"render",value:function render(){var _classNames,_this$props7=this.props,prefixCls=_this$props7.prefixCls,className=_this$props7.className,marks=_this$props7.marks,dots=_this$props7.dots,step=_this$props7.step,included=_this$props7.included,disabled=_this$props7.disabled,vertical=_this$props7.vertical,reverse=_this$props7.reverse,min=_this$props7.min,max=_this$props7.max,children=_this$props7.children,maximumTrackStyle=_this$props7.maximumTrackStyle,style=_this$props7.style,railStyle=_this$props7.railStyle,dotStyle=_this$props7.dotStyle,activeDotStyle=_this$props7.activeDotStyle,_get$call=_get(_getPrototypeOf(ComponentEnhancer.prototype),"render",this).call(this),tracks=_get$call.tracks,handles=_get$call.handles,sliderClassName=classNames(prefixCls,(_classNames={},_defineProperty(_classNames,"".concat(prefixCls,"-with-marks"),Object.keys(marks).length),_defineProperty(_classNames,"".concat(prefixCls,"-disabled"),disabled),_defineProperty(_classNames,"".concat(prefixCls,"-vertical"),vertical),_defineProperty(_classNames,className,className),_classNames));return React.createElement("div",{ref:this.saveSlider,className:sliderClassName,onTouchStart:disabled?noop:this.onTouchStart,onMouseDown:disabled?noop:this.onMouseDown,onMouseUp:disabled?noop:this.onMouseUp,onKeyDown:disabled?noop:this.onKeyDown,onFocus:disabled?noop:this.onFocus,onBlur:disabled?noop:this.onBlur,style:style},React.createElement("div",{className:"".concat(prefixCls,"-rail"),style:_objectSpread(_objectSpread({},maximumTrackStyle),railStyle)}),tracks,React.createElement(Steps,{prefixCls:prefixCls,vertical:vertical,reverse:reverse,marks:marks,dots:dots,step:step,included:included,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:max,min:min,dotStyle:dotStyle,activeDotStyle:activeDotStyle}),handles,React.createElement(Marks,{className:"".concat(prefixCls,"-mark"),onClickLabel:disabled?noop:this.onClickMarkLabel,vertical:vertical,marks:marks,included:included,lowerBound:this.getLowerBound(),upperBound:this.getUpperBound(),max:max,min:min,reverse:reverse}),children)}}]),ComponentEnhancer}(Component),_a.displayName="ComponentEnhancer(".concat(Component.displayName,")"),_a.defaultProps=_objectSpread(_objectSpread({},Component.defaultProps),{},{prefixCls:"rc-slider",className:"",min:0,max:100,step:1,marks:{},handle:function handle(props){var index=props.index,restProps=_objectWithoutProperties(props,["index"]);return delete restProps.dragging,null===restProps.value?null:React.createElement(Handle,_extends({},restProps,{key:index}))},onBeforeChange:noop,onChange:noop,onAfterChange:noop,included:!0,disabled:!1,dots:!1,vertical:!1,reverse:!1,trackStyle:[{}],handleStyle:[{}],railStyle:{},dotStyle:{},activeDotStyle:{}}),_a}